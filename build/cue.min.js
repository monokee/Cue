(function(e){function t(e,t){for(let n=0;n<t.length;n++)e.push(t[n]);return e}function n(e){return e&&e.constructor===M?r(e):J(e)?s(e):void 0}function r(e){const t={};let r,s;for(r in e)s=e[r],t[r]="object"==typeof s?n(s):s;return t}function s(e){const t=[];for(let r,s=0;s<e.length;s++)r=e[s],t[s]="object"==typeof r?n(r):r;return t}function a(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){const n=J(e),i=J(t);if(n!==i)return!1;if(n&&i)return l(e,t);const r=e.constructor===M,s=t.constructor===M;if(r!==s)return!1;if(r&&s)return o(e,t)}return e!==e&&t!==t}function o(e,t){const n=Y(e),r=Y(t);if(n.length!==r.length)return!1;for(let s,a=0;a<n.length;a++)if(s=n[a],-1===r.indexOf(s)||e[s]!==t[s])return!1;return!0}function l(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function d(e,{computed:t}){B(ae,{allProperties:e,derivedProperties:t});const n=new Proxy(e,{get:u});t.forEach(e=>{ae.derivative=e;try{e.computation.call(n,n)}catch(t){}}),ae.derivative=null,ae.allProperties=null,ae.dependencyGraph=null,ae.derivedProperties=null}function u(e,t){const{derivative:n,allProperties:i,dependencyGraph:r,derivedProperties:s}=ae;if(!i.hasOwnProperty(t))throw new Error(`Unable to resolve dependency "${t}" of computed prop "${n.ownPropertyName}".`);if(r.has(t)?r.get(t).push(n):r.set(t,[n]),-1===n.sourceProperties.indexOf(t)&&n.sourceProperties.push(t),s.has(t)){const e=s.get(t);-1===e.subDerivatives.indexOf(n)&&e.subDerivatives.push(n),-1===n.superDerivatives.indexOf(e)&&n.superDerivatives.push(e)}}function p(e,t){t===oe?(c(e),g(e)):t===le&&f(e)}function c(e){if(e.superDerivatives.length)for(let t,n=0;n<e.superDerivatives.length;n++)t=e.superDerivatives[n],t.stopPropagation=!1,t.superDerivatives.length&&c(t)}function g(e,t=!0){if(e.stopPropagation=t,e.subDerivatives.length)for(let t,n=0;n<e.subDerivatives.length;n++)t=e.subDerivatives[n],t.observers.length&&(e.stopPropagation=!1,g(t))}function f(e,t=!1){e.stopPropagation=t;for(let n,r=0;r<e.superDerivatives.length;r++)n=e.superDerivatives[r],n.observers.length?n.stopPropagation=!0:f(n)}function m(e){return new Proxy(e,{get:v,set:h,deleteProperty:_})}function v(e,t){if(t===de||t===pe)return e[t];if(t===ue)return e;const n=$(e,t);if(!n||n[de])return n;if(J(n)||n.constructor===M)return m(me.assignTo(n,e,t));if(q.has(t)&&"function"==typeof n){const i=e[pe];return i.get(t)||i.set(t,y(n)).get(t)}return n}function h(e,t,n){if(!se){const i=e[de],r=i.valueCache.get(t);if(n){const i=n[de];i&&null===i.parent&&(i.parent=e,i.ownPropertyName=t)}if(n!==r){let s=i.attemptCue(t,n,r);if(null!==i.parent){const t=J(e)?e.slice():B({},e);s+=i.parent.attemptCue.call(i.parent,i.ownPropertyName,e,t)}return Z(e,t,n),i.valueCache.set(t,n),0<s&&!0&&E(),!0}}else console.warn(`Setting of "${t}" ignored. Don't mutate state in a reaction. Refactor to computed properties instead.`)}function _(e,t){if(!!se)console.warn(`Deletion of "${t}" ignored. Don't mutate state in a reaction. Refactor to computed properties instead.`);else if(e.hasOwnProperty(t)){const n=e[de],i=n.valueCache.get(t);let r=n.attemptCue(t,void 0,i);if(n.parent){const t=J(e)?e.slice():B({},e);r+=n.parent.attemptCue.call(n.parent,n.ownPropertyName,e,t)}return ee(e,t),n.valueCache.delete(t),0<r&&!0&&E(),!0}}function y(e){return function(...t){if(!se){const n=this[de],i=this[ue];if(null===n.parent)return K(e,i,t);const r=i.slice(),s=K(e,i,t);return l(r,i)||!n.parent.attemptCue.call(n.parent,n.ownPropertyName,i,r)||E(),s}console.warn(`Array mutation ignored. Don't mutate state in a reaction. Refactor to computed properties instead.`)}}function b(e,t,n,r,s,a){let o,d,u;if(r)for(o=0;o<r.length;o++)u=r[o],-1===ce.indexOf(u)&&ce.push(u,{property:e,value:t,oldValue:n});if(s&&(d=s.length)&&!1===a){for(o=0;o<d;o++)s[o].updateProperty(e,t);let n,i;for(o=0;o<d;o++)u=s[o],n=u._value,i=u.value,u.hasChanged&&b(u.ownPropertyName,i,n,u.observers,u.subDerivatives,u.stopPropagation)}}function C(e,t,n,r,s,a){let o,l;if(r)for(o=0;o<r.length;o++)l=r[o],-1===ce.indexOf(l)&&ce.push(l,{property:e,value:t,oldValue:n});if(s&&!1===a)for(o=0;o<s.length;o++)s[o].updateProperty(e,t)}function E(){se=!0;const e=ce.length;for(let t=0;t<e;t+=2)ce[t](ce[t+1]);ce.splice(0,e),se=!1}function P(e,n,a,o,l){const d="object"===e?B(V(n.prototype),r(a.defaults)):t(H([],n.prototype),s(a.defaults)),u=d[de]=new me(o,l);let p,c,g,f,m;return a.computed.forEach(e=>{for(c=new ge(e.ownPropertyName,e.computation,e.sourceProperties),u.derivedProperties.set(e.ownPropertyName,c),p=0;p<e.sourceProperties.length;p++)g=e.sourceProperties[p],f=u.derivativesOf.get(g),f?f.push(c):u.derivativesOf.set(g,[c]);for(p=0;p<e.superDerivatives.length;p++)m=u.derivedProperties.get(e.superDerivatives.ownPropertyName),c.superDerivatives.push(m),m.subDerivatives.push(c);c.fillCache(d)}),d}function O(e){let t;if(J(e.defaults)){if(e.static){let n;t=t=>(e.initialize&&(n[de].isInitializing=!0,e.initialize.call(n,t),n[de].isInitializing=!1),n),t.prototype=V(Array.prototype),n=m(P("array",t,e))}else t=n=>{const i=m(P("array",t,e));return e.initialize&&(i[de].isInitializing=!0,e.initialize.call(i,n),i[de].isInitializing=!1),i},t.prototype=V(Array.prototype);}else if(e.static){let n;t=t=>(e.initialize&&(n[de].isInitializing=!0,e.initialize.call(n,t),n[de].isInitializing=!1),n),t.prototype={},n=m(P("object",t,e))}else t=n=>{const i=m(P("object",t,e));return e.initialize&&(i[de].isInitializing=!0,e.initialize.call(i,n),i[de].isInitializing=!1),i},t.prototype={};return t}function w(e,t){for(var n in t.computed)G(e.prototype,n,{get(){return this[de].derivedProperties.get(n).value},configurable:!0,enumerable:!0});for(n in t.actions)e.prototype[n]=t.actions[n];e.prototype.imports=t.imports,e.prototype[pe]=new Map}function S(e){const t="function"==typeof e?e(ne.state):e;if(!t||t.constructor!==M)throw new TypeError(`Can't create State Module because the config function does not return a plain object.`);const n=J(t.props)?"array":t.props&&t.props.constructor===M?"object":"illegal";if("illegal"==n)throw new TypeError(`State Module requires "props" object (plain object or array) containing default and optional computed properties.`);const r={defaults:"array"==n?[]:{},computed:new Map,initialize:void 0,actions:{},static:!0===t.static,imports:t.imports};let s,a,o;if("array"==n)for(a=0;a<t.props.length;a++)o=t.props[a],"function"==typeof o?r.computed.set(a,{ownPropertyName:a,computation:o,sourceProperties:[],subDerivatives:[],superDerivatives:[]}):r.defaults.push(o);else for(s in t.props)o=t.props[s],"function"==typeof o?r.computed.set(s,{ownPropertyName:s,computation:o,sourceProperties:[],subDerivatives:[],superDerivatives:[]}):r.defaults[s]=o;for(s in d(t.props,r),r.computed=fe.from(r.computed),t)if(o=t[s],"initialize"!==s)"function"==typeof o&&(r.actions[s]=o);else if("function"==typeof o)r[s]=o;else throw new TypeError(`"${s}" is a reserved word for Cue State Modules and must be a function but is of type ${typeof o}`);return r}function D(e,t){return n=>{const i=S(t),r=O(i);return w(r,i),re.set(e,r),r.call(null,n)}}function N(e){let t=0;return(N=function(e){let i,r="";for(const n=t.toString(26).split("");i=n.shift();)r+="abcdefghijklmnopqrstuvwxyz"[parseInt(i,26)];return t++,`${e}-${r}`}).call(null,e)}function U(e,t,n){n.classList.replace(e,t);for(let r=0;r<n.children.length;r++)U(e,t,n.children[r])}function x(e,t){let n,i,r,s,a,o,l,d;for(n in e){for(r in o=N(n),l=Ce.insertRule(`.${o} {}`,Ce.cssRules.length),d=Ce.cssRules[l].style,i=e[n],i)(":"===r[0]||" "===r[0])&&(s=Ce.insertRule(`.${o}${r} {}`,Ce.cssRules.length),a=Ce.cssRules[s].style,B(a,i[r]),delete i[r]);B(d,i),e[n]=o,t&&U(n,o,t)}return e}function T(e){let t,n,i,r,s,a,o,l;for(t in e){for(a in n=N(t),i=Ce.insertRule(`@keyframes ${n} {}`,Ce.cssRules.length),r=Ce.cssRules[i],s=e[t],s)r.appendRule(`${a}% {}`),o=r.cssRules.length-1,l=r.cssRules[o].style,B(l,s[a]);e[t]=n}return e}function j(e){if("string"==typeof e)switch(e=e.trim(),e[0]){case"<":return document.createRange().createContextualFragment(e).firstChild;case".":return document.getElementsByClassName(e.substring(1))[0];case"#":return document.getElementById(e.substring(1));case"[":return document.querySelectorAll(e)[0];default:throw new TypeError(`Can't create template from string because it's not html markup or a valid selector.`);}else if(e instanceof Element)return e}function R(e,t,n,r,s){let o,l,d,u=0,p=0,c=!0,g=t.length-1,f=n.length-1,m=parent.firstChild,v=m,h=parent.lastChild,_=h;outer:for(;c;){c=!1;let e;for(o=t[u],l=n[p];o===l;){if(s(m,l),u++,p++,v=m=m.nextSibling,g<u||f<p)break outer;o=t[u],l=n[p]}for(o=t[g],l=n[f];o===l;){if(s(h,l),g--,f--,d=h,_=h=h.previousSibling,g<u||f<p)break outer;o=t[g],l=n[f]}for(o=t[g],l=n[p];o===l;){if(c=!0,s(h,l),e=h.previousSibling,parent.insertBefore(h,v),_=h=e,p++,g--,g<u||f<p)break outer;o=t[g],l=n[p]}for(o=t[u],l=n[f];o===l;){if(c=!0,s(m,l),e=m.nextSibling,parent.insertBefore(m,d),d=_=m,m=e,u++,f--,g<u||f<p)break outer;o=t[u],l=n[f]}}if(f<p){if(u<=g)for(let e;u<=g;)0===g?parent.removeChild(h):(e=h.previousSibling,parent.removeChild(h),h=e),g--;return}if(g<u){if(p<=f)for(;p<=f;)d?parent.insertBefore(r(n[p]),d):parent.appendChild(r(n[p])),p++;return}const y=Array(f+1-p),C=new Map;let E;for(E=p;E<=f;E++)y[E]=-1,C.set(n[E],E);let P=0,O=[];for(E=u;E<=g;E++)C.has(t[E])?(y[C.get(t[E])]=E,P++):O.push(E);if(0==P){for(parent.textContent="",E=p;E<=f;E++)parent.appendChild(r(n[E]));return}const w=z(y,p),S=[];let D=m;for(E=u;E<=g;E++)S[E]=D,D=D.nextSibling;for(E=0;E<O.length;E++)parent.removeChild(S[O[E]]);let N,U=w.length-1;for(E=f;E>=p;E--)w[U]===E?(d=S[y[w[U]]],s(d,n[E]),U--):(-1===y[E]?N=r(n[E]):(N=S[y[E]],s(N,n[E])),parent.insertBefore(N,d),d=N)}function z(e,t){const r=[],s=[],a=Array(e.length);let o,d,u,p=-1;for(o=t;o<e.length;o++){if(d=e[o],0>d)continue;let t,n=-1,i=r.length;if(0<i&&r[i-1]<=d)u=i-1;else{for(;1<i-n;)t=FLOOR((n+i)/2),r[t]>d?i=t:n=t;u=n}-1!==u&&(a[o]=s[u]),u===p?(p++,r[p]=d,s[p]=o):d<r[u+1]&&(r[u+1]=d,s[u+1]=o)}for(o=s[p];0<=p;o=a[o],p--)r[p]=o;return r}function k(e){const t="function"==typeof e?e.call(null,ne.ui):e;if(!t||t.constructor!==M)throw new TypeError(`Can't create UI Module because the configuration function did not return a plain object.`);if(!t.template)throw new TypeError(`UI Module requires "template" property that specifies a DOM Element. // expect(template).toEqual(HTMLString || Selector || DOMNode).`);const n=j(t.template);return{template:n,imports:t.imports||null,styles:t.styles?x(t.styles,n):null,keyframes:t.keyframes?T(t.keyframes):null,initialize:t.initialize||null,didMount:t.didMount||L,didUpdate:t.didUpdate||L,willUnmount:t.willUnmount||L}}function I(e){let t=null;return n=>{t||(t=k(e));const i=new Ee(t.template.cloneNode(!0),t.imports,t.styles,t.keyframes);return t.initialize&&t.initialize.call(i,n),i.element}}const L=()=>{},q=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]),M=Object,A=Array,B=M.assign,V=M.create,G=M.defineProperty,W=M.defineProperties,H=M.setPrototypeOf,F=M.getPrototypeOf,X=M.prototype.toString,Y=M.keys,Q=M.entries,J=A.isArray,Z=Reflect.set,$=Reflect.get,K=Reflect.apply,ee=Reflect.deleteProperty,te={},ne={core:te,state:V(te),ui:V(te)},ie={};{const e=new Map,t=`Can't add listener because the provided arguments are invalid.`;let n,i,r,s,a,o=[];const l=(t,n,i,r)=>{const s={handler:n,scope:i,once:r};e.has(t)?e.get(t).push(s):e.set(t,[s])},d=(e,t,r)=>{for(n in e)if(i=e[n],"function"==typeof i)l(n,i,t,r);else throw new TypeError(`Can't add listener because handler for "${n}" is not a function but of type ${typeof i}`)};B(ie,{on:(e,n,i)=>{if(e&&e.constructor===M)r="object"==typeof n?n:null,d(e,r,!1);else if("string"==typeof e&&"function"==typeof n)r="object"==typeof i?i:null,l(e,n,r,!1);else throw new TypeError(t)},once:(e,n,i)=>{if(e&&e.constructor===M)r="object"==typeof n?n:null,d(e,r,!0);else if("string"==typeof e&&"function"==typeof n)r="object"==typeof i?i:null,l(e,n,r,!0);else throw new TypeError(t)},off:t=>{e.delete(t)},trigger:(t,...n)=>{if(s=e.get(t)){for(let e=0;e<s.length;e++)a=s[e],a.handler.apply(a.scope,n),a.once&&o.push(a);o.length&&(e.set(t,s.filter(e=>-1===o.indexOf(e))),o.length=0),s=null}}})}const re=new Map;let se=!1;const ae={derivative:null,allProperties:null,derivedProperties:null},oe=-1,le=1,de=Symbol("\uD83C\uDF51"),ue=Symbol("Target Object"),pe=Symbol("Intercepted Methods"),ce=[];ne.state=V(ne.core,{import:{value:function(e){const t=re.get(e);if(!t)throw new ReferenceError(`Can't import State Module because nothing is registered under "${e}".`);return t}}});class ge{constructor(e,t,n){this.ownPropertyName=e,this.computation=t,this.sourceProperties=n,this.subDerivatives=[],this.superDerivatives=[],this.observers=[],this.valueCache=V(null),this.intermediate=void 0,this._value=void 0,this.stopPropagation=!1,this.needsUpdate=!1,this.hasChanged=!1}get value(){return this.needsUpdate&&(this.intermediate=this.computation.call(null,this.valueCache),a(this._value,this.intermediate)?this.hasChanged=!1:(this._value=this.intermediate,this.hasChanged=!0),this.needsUpdate=!1),this._value}updateProperty(e,t){this.valueCache[e]=t,this.needsUpdate=!0}fillCache(e){for(let t,n=0;n<this.sourceProperties.length;n++)t=this.sourceProperties[n],this.valueCache[t]=e[t];this.needsUpdate=!0}dispose(e=!0){let t;for(this.valueCache=void 0,this.observers=void 0,this.intermediate=void 0,this._value=void 0,t=0;t<this.superDerivatives.length;t++)this.superDerivatives[t].subDerivatives=this.superDerivatives[t].subDerivatives.filter(e=>e!==this),f(this.superDerivatives[t],!0);for(t=0;t<this.subDerivatives.length;t++)this.subDerivatives[t].dispose(!1);if(e)for(t=0;t<this.superDerivatives.length;t++)p(this.superDerivatives[t],oe);this.superDerivatives=void 0}}const fe={source:null,visited:[],from(e){this.source=e;const t=new Map;for(const n of e.keys())this._visit(n,[],t);return this.source=null,this.visited.splice(0,this.visited.length),t},_visit(e,t,n){if(this.source.has(e)){t.push(e),this.visited.push(e);const r=this.source.get(e);for(let e,s=0;s<r.sourceProperties.length;s++){if(e=r.sourceProperties[s],-1!==t.indexOf(e))throw new Error(`Circular dependency. "${r.ownPropertyName}" is required by "${e}": ${t.join(" -> ")}`);-1===this.visited.indexOf(e)&&this._visit(e,t,n)}n.has(e)||n.set(e,r)}}};class me{static assignTo(e,t,n){return e[de]=new this(t,n),e}constructor(e=null,t=""){this.parent=e,this.ownPropertyName=t,this.isInitializing=!1,this.valueCache=new Map,this.observersOf=new Map,this.derivativesOf=new Map,this.derivedProperties=new Map}addChangeReaction(e,t,n=null){if("function"!=typeof t)throw new TypeError(`Property change reaction for "${e}" is not a function...`);const i=null===n?t:t.bind(n);if(this.observersOf.has(e)?this.observersOf.get(e).push(i):this.observersOf.set(e,[i]),this.derivedProperties.has(e)){const t=this.derivedProperties.get(e);t.observers.push(i),p(t,oe)}return i}removeChangeReaction(e,t){if(this.observersOf.has(e)){const n=this.observersOf.get(e),r=this.derivedProperties.get(e);if(t===void 0)this.observersOf.delete(e),r&&(r.observers.splice(0,r.observers.length),p(r,le));else if("function"==typeof t){let s=n.indexOf(t);-1<s?n.splice(s,1):console.warn(`Can't remove the passed handler from reactions of "${e}" because it is not registered.`),r&&(s=r.observers.indexOf(t),-1<s?(r.observers.splice(s,1),p(r,le)):console.warn(`Can't remove the passed handler from observers of derived property "${e}" because it is not registered.`))}}else console.warn(`Can't unobserve property "${e}" because no reaction has been registered for it.`)}attemptCue(e,t,n){const i=this.derivativesOf.get(e),r=this.observersOf.get(e);return i||r?(b(e,t,n,r,i,!1),1):0}}const ve={State:(e,t)=>{if("string"!=typeof e)throw new TypeError(`Can't create Cue State Module. First argument must be name of type string but is of type "${typeof e}".`);else if(re.has(e))throw new Error(`A State Module has already been registered under name "${e}". Unregister, use a unique name or consider namespacing.with.dots-or-hyphens...`);const n=D(e,t);return re.set(e,n),n}};ve.State.isState=e=>!!e[de];const he=new Map;ne.ui=V(ne.core,{import:{value:function(e){const t=he.get(e);if(!t)throw new ReferenceError(`Can't import UI Component because nothing is registered under "${e}".`);return t}}});const _e=Symbol("ClassName Map"),ye=Symbol("Original ClassList");class be{constructor(e,t){if(!e)throw new TypeError(`Can't create MappedClassList. First argument has to be a plain Object, 2D Array or a Map but is ${JSON.stringify(e)}.`);else e.constructor===M?e=new Map(Q(e)):J(e)&&(e=new Map(e));W(this,{[_e]:{value:e},[ye]:{value:t.classList}})}item(e){return this[ye].item(e)}has(e){return this.contains(e)}contains(e){return this[ye].contains(this[_e].get(e)||e)}add(e){this[ye].add(this[_e].get(e)||e)}remove(e){this[ye].remove(this[_e].get(e)||e)}replace(e,t){this[ye].replace(this[_e].get(e)||e,this[_e].get(t)||t)}toggle(e){this[ye].toggle(this[_e].get(e)||e)}}const Ce=(()=>{const e=document.createElement("style");return e.id="CUE-STYLES",document.head.appendChild(e),e.sheet})(),Ee=(e=>e())(()=>{const e=Array.isArray,t=Array.from,n=e=>"object"==typeof e&&null!==e,i=document,r=NodeList.prototype.isPrototypeOf,s=HTMLCollection.prototype.isPrototypeOf,a=(()=>{const e=document.createElement("tst"),n={transition:{run:"transitionrun",start:"transitionstart",end:"transitionend"},WebkitTransition:{run:"webkitTransitionRun",start:"webkitTransitionStart",end:"webkitTransitionEnd"},MozTransition:{run:"transitionRun",start:"transitionStart",end:"transitionEnd"},MSTransition:{run:"msTransitionRun",start:"msTransitionStart",end:"msTransitionEnd"},OTransition:{run:"oTransitionRun",start:"oTransitionStart",end:"oTransitionEnd"}};for(const i in n)if(e.style[i])return n[i]})();return class{constructor(e,t,n,i){this.element=e,this.imports=t,this.styles=n&&Y(n).length?new be(n,e):null,this.keyframes=i||null,this.on("click",()=>{},{once:!0}),this.on(".child","click",()=>{},{once:!0}),this.on({click:()=>{}},{once:!0}),this.on(this.element.firstChild,{})}select(n,a){if("string"==typeof n){const e=a?this.select(a):this.element;let r;switch(n[0]){case"#":r=i.getElementById(n.substring(1));break;case".":r=e.getElementsByClassName(n.substring(1));break;default:r=e.querySelectorAll(n);}return r.nodeType!==Node.TEXT_NODE&&r.length?1<r.length?t(r):r[0]:r}if(n instanceof Element)return n;if(Ue.UI.isComponent(n))return n.element;if(r(n)||s(n))return t(n);if(e(n))return n.map(e=>this.select(e,a));if("object"==typeof n&&null!==n){const e={};for(const t in n)e[t]=this.select(n[t],a);return e}}hasContent(e){return e=e?this.select(e):this.element,!!(e.children.length||e.textContent.trim().length)}isIterable(e){return e=e?this.select(e):this.element,e.nodeType!==Node.TEXT_NODE&&e.length}getIndex(e){return e=e?this.select(e):this.element,t(e.parentNode.children).indexOf(e)}getSiblings(e,n=!1){return e=e?this.select(e):this.element,n?t(e.parentNode.children):t(e.parentNode.children).filter(t=>t!==e)}getRefs(e){e=parent?this.select(e):this.element;const t=e.querySelectorAll("[ref]");if(t.length){const e={};for(let n,r=0;r<t.length;r++)n=t[r],e[n.getAttribute("ref")]=n;return e}}getBoundingBox(e){e=e?this.select(e):this.element;const t=e.cloneNode(!0);t.style.position="absolute",t.style.left="-100000px",t.style.top="-100000px",t.style.display="block",this.element.parentElement.appendChild(t);const n=t.getBoundingClientRect();return t.parentElement.removeChild(t),n}awaitTransition(...e){return e=e.length?e.map(e=>this.select(e)):[this.element],Promise.all(e.map(e=>a.end?new Promise(t=>{const n=this.select(e),i=()=>{n.removeEventListener(a.end,i),t()};n.addEventListener(a.end,i)}):Promise.resolve()))}setChildren(e,{from:i=[],to:t,create:n,update:r=L}){if(e=e?this.select(e):this.element,0===t.length)return void(e.textContent="");if(0===i.length){for(let r=0;r<t.length;r++)e.appendChild(n(t[r]));return}R(e,i,t,n,r)}observe(e,t,i,r,s=!0){const a=e[de];if("string"==typeof i){const n=a.addChangeReaction(i,r,t);return!0===s&&n({property:i,value:e[i],oldValue:e[i]}),n}if(n(i)){const n="boolean"==typeof r?r:s,o={};let l,d;for(l in i)d=a.addChangeReaction(l,i[l],t),o[l]=d,!0===n&&d({property:l,value:e[l],oldValue:e[l]});return o}}unobserve(e,t,n){const i=e[de];if("string"==typeof t)i.removeChangeReaction(t,n);else if(t.constructor===M&&null!==t)for(const e in t)i.removeChangeReaction(e,t[e])}on(e,t,i,r){if(e=this.select(e),2===arguments.length&&n(t))for(const r in t)e.addEventListener(r,t[r],n(i)?i:{});else if("function"==typeof i)e.addEventListener(t,i,r||{});else throw new TypeError(`Can't bind event listener(s) because of invalid arguments.`)}off(e,t,i){if(e=this.select(e),2===arguments.length&&n(t))for(const n in t)e.removeEventListener(n,t[n]);else if("function"==typeof i)e.removeEventListener(t,i);else throw new TypeError(`Can't remove event listener(s) because of invalid arguments.`)}insertBefore(e,t){return t.parentNode.insertBefore(e,t),this}insertAfter(e,t){return t.parentNode.insertBefore(e,t.nextSibling),this}insertAt(e,t){const n=e.parentNode,i=n.children;return t>=i.length?n.appendChild(e):0>=t?n.insertBefore(e,n.firstChild):n.insertBefore(e,i[t>=Array.from(i).indexOf(e)?t+1:t]),this}detach(e){return e.parentNode.removeChild(e)}remove(e){return e.parentNode.removeChild(e),this}}}),Pe={UI:(e,t)=>{if("string"!=typeof e)throw new TypeError(`Can't create Cue-UI Module. First argument must be name of type string but is of type "${typeof e}".`);else if(!t||"function"!=typeof t&&t.constructor!==Object)throw new TypeError(`Can't create Cue-UI Module. Second argument must be module initializer function or configuration object but is of type "${typeof t}".`);else if(he.has(e))throw new Error(`A UI Module has already been registered under name "${e}". Unregister, use a unique name or consider namespacing.with.dots-or-hyphens...`);const n=I(t);return he.set(e,n),n}};Pe.UI.isComponent=e=>e instanceof Ee;const Oe=new Map,we=e=>"string"==typeof e&&2<e.length&&-1!==e.indexOf("-"),Se=e=>e.split("-"),De=(e,t)=>e.didInstall?e.extensionPoint:(e.extensionPoint=e.installer.call(null,ne,t),e.didInstall=!0,e.extensionPoint),Ne={mount(e=document.body,t=void 0){if(!0===this.mounted)throw new Error("Cue instance already mounted.");if(e="string"==typeof e?document.querySelector(e):e instanceof Element?e:null,!e)throw new TypeError(`Target is not HTMLElement or Selector of element that is in the DOM.`);const n=ne.state.import(this.state.module),i=ne.ui.import(this.ui.component);return this.state.instance=n(t),this.ui.element=i(this.state.instance),e.appendChild(this.ui.element),this.lifeCycle.didMount.call(this),this.mounted=!0,this},unmount(){if(!1===this.mounted)throw new Error(`Can't unmount Cue instance because it has not been mounted.`);return this.lifeCycle.willUnmount.call(this),this.ui.element.parentElement.removeChild(this.ui.element),this.ui.element=null,this.state.instance=null,this.mounted=!1,this}};e||(e=window);const Ue=e.Cue=B(function(e){if(!e||e.constructor!==M)throw new TypeError("[Cue]: config is not an object.");if("string"!=typeof e.state)throw new TypeError(`[Cue]: config.state is "${typeof e.state}" and not a name. Specify the name of a state module to use as the root state for the Cue instance.`);if("string"!=typeof e.ui)throw new TypeError(`[Cue]: config.ui is "${typeof e.ui}" and not a name. Specify the name of a ui component to use as the root element for the Cue instance.`);return B(V(Ne),{state:{module:e.state,instance:null},ui:{component:e.ui,element:null},mounted:!1,lifeCycle:{didMount:e.didMount||L,willUnmount:e.willUnmount||L}})},ie,{Plugin:(e,t,n)=>{if(!we(e))throw new Error(`Plugin must be defined with a namespaced-name (vendor-plugin) of type string as the first argument.`);const[i,r]=Se(e);if(!t&&!n){const t=Oe.get(i);if(t){const n=t.get(r);if(n)return n;throw new Error(`No Plugin with name ${e} has been registered under "${i}".`)}else throw new Error(`No Plugin has been registered under "${t}".`)}else{if("function"!=typeof t)throw new Error(`Plugin must be defined with an installable function as the second argument.`);const s=Oe.get(i)||Oe.set(i,new Map).get(i);if(s.has(r))return console.warn(`A plugin with name "${r}" has already been registered under "${i}". Skipping installation...`),s.get(r).name;const a={installer:t,didInstall:!1,name:e,extensionPoint:void 0};return s.set(r,a),n&&De(a),e}},use:(e,t)=>{if(!we(e))throw new Error(`pluginName must be a namespaced-string (vendor-plugin).`);const[n,i]=Se(e),r=Oe.get(n);if(r){const e=r.get(i);if(e)return De(e,t)}throw new Error(`No Plugin has been registered under "${e}".`)}},ve,Pe);console.log(`%c🍑 Cue.js - Version ${.9}`,"color: rgb(0, 140, 255)"),Ue.Plugin("cue-math",e=>{const t=Math,n=t.max,i=t.min,r=t.random,s=t.abs,a=t.pow,o=t.round,l=t.floor,u=t.ceil,p=t.PI;return e.core.Math={clamp(e,t,r){return n(e,i(t,r))},lerp(e,t,n){return(1-n)*e+n*t},smoothStep(e,t,n){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))},translate(e,t,n,i,r){return n+(r-e)*(i-n)/(t-e)},createTranslator(e,t,n,i){return 0===e&&0<n?e=>e*(i-n)/t+n:0===n&&0<e?n=>(n-e)*i/(t-e):0===e===n?e=>e*i/i:this.translate},convertBits(e,t,n){return 32>e?32>t?n*a(2,t)/a(2,e):n/a(2,e):32>t?o(n*a(2,t)):n},randomIntBetween(e,t){return l(r()*(t-e+1)+e)},randomFloatBetween(e,t){return r()*(t-e)+e},isOdd(e){return 1&e},isEven(e){return!(1&e)},degreesToRadians(e){return e*(p/180)},radiansToDegrees(e){return e*(180/p)},scale(e,t){const n=e.length-1,r=t-1;let s,o=0,p=0,g=0,f=0;for(s=1;s<r;s++)o=s*(n/r),p=l(o),g=u(o),f=o-p,e[s]=e[p]+(e[g]-e[p])*f;return e[r]=e[n],this},closest(e,t){return e.reduce((e,n)=>s(n-t)<s(e-t)?n:e)},smallest(e){let t=1/0;for(let n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return t===1/0?void 0:t},largest(e){let t=-Infinity;for(let n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return t===-Infinity?void 0:t}}},!0),Ue.Plugin("cue-string",e=>e.core.String={createUID(){let e=0;return(this.createUID=function(){let t,i="";for(const n=e.toString(26).split("");t=n.shift();)i+="abcdefghijklmnopqrstuvwxyz"[parseInt(t,26)];return e++,i}).call(this)},toCamelCase(e){const t=document.createElement("div");return t.setAttribute(`data-${e}`,""),Y(t.dataset)[0]},toDashedCase(e){const t=document.createElement("div");return t.dataset[e]="",t.attributes[0].name.substr(5)}}),Ue.Plugin("cue-array",e=>{const t=Array.isArray;return e.core.Array={flatten(e){return e.reduce((e,n)=>e.concat(t(n)?this.flatten(n):n),[])},insertEveryNth(e,t,r){for(let n=e.length;0<--n;)0==n%r&&e.splice(n,0,t);return this},removeEveryNth(e,t){for(let n=e.length;--n;)0==n%t&&e.splice(n,1);return this},removeRange(e,t,n){return e.splice(t,n-t),this},merge(e,...t){let n,r,a;for(n=0;n<t.length;n++)for(a=t[n],r=0;r<a.length;r++)e.push(a[r]);return this}}},!0),Ue.Plugin("cue-equality",e=>{const t=Object,n=Array.isArray;return t.assign(e.core,{isEqual(e,i,r=!1){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){const s=e.constructor===t,a=i.constructor===t;if(s!==a)return!1;if(s&&a)return this.arePlainObjectsEqual(e,i,r);const o=n(e),l=n(i);if(o!==l)return!1;if(o&&l)return this.areArraysEqual(e,i,r);const d=e instanceof Map,u=i instanceof Map;if(d!==u)return!1;if(d&&u)return this.areMapsEqual(e,i,r);const p=e instanceof Set,c=i instanceof Set;if(p!==c)return!1;if(p&&c)return this.areSetsEqual(e,i,r);const g=e instanceof Date,f=i instanceof Date;if(g!==f)return!1;if(g&&f)return e.getTime()===i.getTime();const m=e instanceof RegExp,v=i instanceof RegExp;return m===v&&(m&&v?e.toString()===i.toString():this.arePlainObjectsEqual(e,i,r))}return e!==e&&i!==i},areArraysEqual(e,t,n=!1){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!this.isEqual(e[r],t[r],n))return!1;return!0},arePlainObjectsEqual(e,t,n=!1){const r=Y(e),s=Y(t);if(r.length!==s.length)return!1;for(let a,o=0;o<r.length;o++)if(a=r[o],-1===s.indexOf(a)||!this.isEqual(e[a],t[s[o]],n))return!1;return!0},areMapsEqual(e,t,n=!1){if(e.size!==t.size)return!1;const r=Array.from(e),s=Array.from(t);for(let a,o,l=0;l<r.length;l++)if(a=r[l],o=s[l],a[0]!==o[0]||!this.isEqual(a[1],o[1],n))return!1;return!0},areSetsEqual(e,t,n=!1){if(e.size!==t.size)return!1;const r=Array.from(e),s=Array.from(t);for(let a=0;a<r.length;a++)if(!this.isEqual(r[a],s[a],n))return!1;return!0}})},!0),Ue.Plugin("cue-clone",e=>{const t=Object,n=t.prototype.toString,i=Array.isArray,r=Object.getPrototypeOf;return t.assign(e.core,{clone(e,t=!1){if(i(e))return this.cloneArray(e,t);if("object"==typeof e&&null!==e){if(n.call(e)==="[object Object]"||null===r(e))return this.clonePlainObject(e,t);if(e instanceof Map)return this.cloneMap(e,t);if(e instanceof Set)return this.cloneSet(e,t);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return RegExp(e.source,e.flags)}throw new TypeError(`Can't clone non-object, null or undefined."`)},cloneArray(e,t=!1){if(t){const n=[];for(let r,s=0;s<e.length;s++)r=e[s],n.push("object"==typeof r&&null!==r?this.clone(r,t):r);return n}return e.slice()},clonePlainObject(e,n=!1){if(n){const t={};let i,r;for(i in e)r=e[i],t[i]="object"==typeof r&&null!==r?this.clone(r,n):r;return t}return t.assign({},e)},cloneMap(e,t=!1){const n=new Map;return t?e.forEach((e,i)=>n.set("object"==typeof i?this.clone(i,t):i,"object"==typeof e&&null!==e?this.clone(e,t):e)):e.forEach((e,t)=>n.set(t,e)),n},cloneSet(e,t=!1){const n=new Set;return e.forEach(e=>n.add(t&&"object"==typeof e&&null!==e?this.clone(e,t):e)),n}})},!0),Ue.Plugin("cue-fn",e=>e.core.Function={throttle(e,t=250,n=null){let i=0,r=0;return function(...s){i=Date.now(),i>r+t&&(e.apply(n,s),r=i)}},defer(e,t=250,n=null){let i=null;return function(...r){clearTimeout(i),i=setTimeout(()=>{e.apply(n,r),i=null},t)}},createTaskWorker(e){const t="function"==typeof e?e:e.process?e.process:void 0,n=new Worker(window.URL.createObjectURL(new Blob([`(function() { onmessage = ${t.toString()} })()`],{type:"application/javascript"})));return e.response&&(n.onmessage=e.response),e.onError&&(n.onerror=e.onError),{process:n.postMessage.bind(n),terminate:n.terminate.bind(n),set response(e){n.onmessage=e},get response(){return n.onmessage},set onError(e){n.onerror=e},get onError(){return n.onerror}}}},!0)})(window||this);