!function(e){const t=()=>{};function n(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;let r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=e.length;0!=r--;)if(!n(e[r],t[r]))return!1;return!0}const s=Object.keys(e),o=s.length;if(o!==Object.keys(t).length)return!1;for(r=o;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=o;0!=r--;){const o=s[r];if(!n(e[o],t[o]))return!1}return!0}return e!=e&&t!=t}function r(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++)t.push(r(e[n]));return t}const t=Object.keys(e),n={};for(let s,o=0;o<t.length;o++)s=t[o],n[s]=r(e[s]);return n}function s(e){if(!e.length)return"0";let t=0;for(let n,r=0;r<e.length;r++)n=e.charCodeAt(r),t=(t<<5)-t+n,t&=t;return t+""}const o=(()=>{try{return e.localStorage.setItem("CUE_CACHE::TEST","1"),e.localStorage.removeItem("CUE_CACHE::TEST"),e.localStorage}catch(e){return{_data:{},setItem(e,t){this._data[e]=t},getItem(e){return this._data[e]||null},removeItem(e){delete this._data[e]}}}})(),i=new Map,a="CUE_SERVER_CACHE::KEYS",c=Symbol();let l=null;const u={get:(e,t=0,n)=>new Promise(((r,i)=>{p();const l=s(e),u=function(e){const t=o.getItem(`${e}::ts`);if(null===t)return c;if(Number(t)<Date.now())return h(e),c;try{return JSON.parse(o.getItem(e))}catch(t){return o.getItem(e)}}(l);u===c?f(e,"GET",n).then((e=>{t>0&&function(e,t,n){const r=Date.now()+1e3*n;"object"==typeof t&&(t=JSON.stringify(t));const s=`${e}::ts`;o.setItem(e,t),o.setItem(s,`${r}`);let i=o.getItem(a);null===i?i=`${e},${s},`:-1===i.indexOf(`${e},`)&&(i=`${i}${e},${s},`);o.setItem(a,i)}(l,e,t),r(e)})).catch((e=>{i(e)})).finally(g):(g(),r(u))})),post:(e,t,n)=>new Promise(((r,s)=>{p(),f(e,"POST",n,t).then((e=>r(e))).catch((e=>s(e))).finally(g)})),put:(e,t,n)=>new Promise(((r,s)=>{p(),f(e,"PUT",n,t).then((e=>r(e))).catch((e=>s(e))).finally(g)})),delete:(e,t,n)=>new Promise(((r,s)=>{p(),f(e,"DELETE",n,t).then((e=>r(e))).catch((e=>s(e))).finally(g)})),clearCache(e){h(s(e))},onRequestStart(){},onRequestStop(e){}};function h(e){if(e){if(null!==o.getItem(e)){const t=`${e}::ts`;o.removeItem(e),o.removeItem(t);const n=o.getItem(a);if(null!==n){const r=n.split(",");r.splice(r.indexOf(e),1),r.splice(r.indexOf(t),1),o.setItem(a,`${r.join(",")},`)}}}else{const e=o.getItem(a);if(null!==e){const t=e.split(",");for(let e=0;e<t.length;e++)o.removeItem(t[e]);o.removeItem(a)}}}function f(e,t,n,r={}){if(i.has(e))return i.get(e);{const s={"Content-Type":"application/json"};return n&&(s.Authorization=`Bearer ${n}`),i.set(e,new Promise(((n,o)=>{fetch(e,{method:t,mode:"cors",cache:"no-store",credentials:"same-origin",headers:s,redirect:"follow",referrer:"no-referrer",body:"GET"===t?null:"string"==typeof r?r:JSON.stringify(r)}).then((e=>{e.ok?204===e.status?n({}):d(e,n):d(e,o)})).catch((e=>{o(e)})).finally((()=>{i.delete(e)}))}))),i.get(e)}}function d(e,t){e.text().then((e=>{try{t(JSON.parse(e))}catch(n){t(e)}}))}function p(){clearTimeout(l),u.onRequestStart()}function g(){l=setTimeout((()=>{u.onRequestStop()}),100)}const m=new Map,y=new Map,b=new Map,v=new Map,w=[];let C=null;const S={cueEvent(e,t){m.set(e,t)},cueCallback(e,t){y.set(e,t)},cueComputations(e,t,n,r){const s=e.get(n),o=[e,t,r];for(let e=0;e<s.length;e++)b.set(s[e],o)},react(){cancelAnimationFrame(C),C=requestAnimationFrame(x)}};function x(){let e,t,n,r,s,o,i,a;for(t of m.entries())t[0](t[1]);for(;b.size>0;){for(t of b.entries())r=t[0],-1===w.indexOf(r)&&(s=t[1],i=s[0],o=s[1],r.needsUpdate=!0,a=r.value(s[2]),!0===r.hasChanged&&(o[r.ownPropertyName]&&y.set(o[r.ownPropertyName],a),v.set(r,s)),w.push(r));for(t of(b.clear(),v.entries()))if(r=t[0],s=t[1],n=s[0].get(r.ownPropertyName),n)for(e=0;e<n.length;e++)b.set(n[e],s);v.clear()}for(t of y.entries())t[0](t[1]);for(m.clear(),y.clear();w.length>0;)w.pop()}const O=(e,t)=>e+"."+t+"::CueStore",E=(e,t)=>void 0===t?null:t,_=new Map,A=Symbol("Cue.Store.internals"),P=Symbol("Cue.Store"),T=Symbol("Cue.Store.set"),I=Symbol("Cue.Store.get"),k=Symbol("Cue.Store.dispatch");class M{constructor(e,t){this.id=P,this.store=e,this.key=t}get(){return this.store[A].data[this.key]}set(e){this.store[A].data[this.key]=e,this.store[k](this.key,e)}}class j{constructor(e,t,n){const s=this[A]={name:e,defaultData:r(t),events:new Map,bindings:new Map,storage:n};if(null===n)s.usesStorage=!1,s.data=t;else{s.usesStorage=!0;const r=s.storageKeys={};for(const o in t){const t=O(e,o);r[o]=t,null===n.getItem(t)&&n.setItem(t,JSON.stringify(s.defaultData[o],E))}s.data=new Proxy({},{get:(t,s)=>JSON.parse(n.getItem(r[s]||O(e,s))),set:(t,s,o)=>(n.setItem(r[s]||O(e,s),JSON.stringify(o,E)),!0),has:(t,s)=>null!==n.getItem(r[s]||O(e,s)),deleteProperty:(t,s)=>(n.removeItem(r[s]||O(e,s)),!0)})}}[I](e){return this[A].data[e]}[T](e,t){this[A].data[e]=t,this[k](e,t)}[k](e,t){const n=this[A].events.get(e);if(n){for(let e=0;e<n.length;e++)S.cueEvent(n[e],t);S.react()}}get(e){const t=this[A];if(t.usesStorage){if(!e){const e={};for(const n in t.defaultData)e[n]=t.data[n];return e}return t.data[e]}return e?t.data[e]:t.data}set(e,t){const r=this[A].data;if(e&&"object"==typeof e){let t,s;for(t in e)s=e[t],n(r[t],s)||this[T](t,s)}else n(r[e],t)||this[T](e,t)}reset(e){e?this.set(e,r(this[A].defaultData[e])):this.set(r(this[A].defaultData))}has(e){const t=this[A];return t.usesStorage?null!==t.storage.getItem(t.storageKeys[e]||O(t.name,e)):this[A].data.hasOwnProperty(e)}remove(e){delete this[A].data[e],this[k](e,void 0)}bind(e){const t=this[A];return t.bindings.has(e)||t.bindings.set(e,new M(this,e)),t.bindings.get(e)}subscribe(e,t,n=!1){const r=this[A];return r.events.has(e)?r.events.get(e).push(t):r.events.set(e,[t]),!0===n&&this[k](e,r.data[e]),{unsubscribe:()=>{const n=r.events.get(e);n.splice(n.indexOf(t),1)}}}}const $={create(e,t,n=null){if(_.has(e))throw new Error('Can not create Store "'+e+'". A store with the same name already exists.');const r=new j(e,t,n);return _.set(e,r),r},destroy(e){if(!_.has(e))throw new Error('Can not destroy Store "'+e+'". Store does not exist.');const t=_.get(e);t.clear(!0),t[A].events.clear(),_.delete(e)}},R={computedProperty:null,computedProperties:null};let L=null,q=[];class H{constructor(e,t,n=[]){this.ownPropertyName=e,this.computation=t,this.sourceProperties=n,this.intermediate=void 0,this._value=void 0,this._type=-1,this.needsUpdate=!0,this.hasChanged=!1}value(e){return!0===this.needsUpdate&&(this.intermediate=this.computation.call(e,e,this._value),Array.isArray(this.intermediate)?(this.hasChanged=1!==this._type||!function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(this._value,this.intermediate))&&(this._value=this.intermediate.slice(),this._type=1):"object"==typeof this.intermediate&&null!==this.intermediate?(this.hasChanged=2!==this._type||!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s,o=0;o<n.length;o++)if(s=n[o],-1===r.indexOf(s)||e[s]!==t[s])return!1;return!0}(this._value,this.intermediate))&&(this._value=Object.assign({},this.intermediate),this._type=2):(this.hasChanged=this._value!==this.intermediate)&&(this._value=this.intermediate,this._type=0),this.needsUpdate=!1),this._value}}function N(e,t){return function(e){L=e;const t=new Map;let n;for(n of e.keys())U(n,[],t);return L=null,q=[],t}(function(e,t){Object.assign(R,{computedProperties:t});const n=new Proxy(e,{get:D});let r;for(r of t.values()){R.computedProperty=r;try{r.computation.call(n,n)}catch(e){if(e.type&&"cue-internal"===e.type)throw new Error(e.message)}}return R.computedProperty=null,R.computedProperties=null,t}(e,t))}function D(e,t){const{computedProperty:n}=R;if(!e.hasOwnProperty(t))throw{type:"cue-internal",message:`Cannot resolve computed property "${n.ownPropertyName}" because dependency "${t}" doesn't exist.`};-1===n.sourceProperties.indexOf(t)&&n.sourceProperties.push(t)}function U(e,t,n){if(L.has(e)){t.push(e),q.push(e);const r=L.get(e);for(let e,s=0;s<r.sourceProperties.length;s++){if(e=r.sourceProperties[s],-1!==t.indexOf(e))throw new Error(`Circular dependency. "${r.ownPropertyName}" is required by "${e}": ${t.join(" -> ")}`);-1===q.indexOf(e)&&U(e,t,n)}n.has(e)||n.set(e,r)}}const z=/(\$self(?=[\\040,{.:#[>+~]))|\$self\b/g,Q=[" ",".",":","#","[",">","+","~"];let B=-1;const G=new Set,J=new Map,F=new Map,K=new Map,Y=new Map,V=Symbol("Component Data"),W=document.createElement("div"),X={compiler:document.getElementById("cue::compiler")||Object.assign(document.head.appendChild(document.createElement("style")),{id:"cue::compiler"}),components:document.getElementById("cue::components")||Object.assign(document.head.appendChild(document.createElement("style")),{id:"cue::components"})},Z={define(e,s){let o=!1,i=!1;const a={initialize:t,disconnected:t},c={static:{},computed:new Map,bindings:{},reactions:{}},l=document.createElement("template");l.innerHTML=s.element||"",l.__slots={},l.__hasSlots=!1;const u=l.content.querySelectorAll("slot");for(let e=0;e<u.length;e++){const t=u[e];l.__slots[t.getAttribute("name")]=t.outerHTML,l.__hasSlots=!0}const h=te(l.content,{});class f extends HTMLElement{constructor(){if(super(),this[V]={reactions:{},computedProperties:new Map,subscriptions:[],refs:{},_data:{},initialized:!1,dataEvent:new CustomEvent("data",{bubbles:!0,cancelable:!0,detail:{key:"",value:void 0}})},!1===o){o=!0;const t=s.style||s.styles;t&&"string"==typeof t&&function(e,t,n){t=t.replace(z,e);for(const e in n)t=t.replace(new RegExp("(\\"+e+"(?=[\\40{,.:#[>+~]))|\\"+e+"\b","g"),n[e]);X.compiler.innerHTML=t;const r=X.compiler.sheet;let s="",o="";for(let t,n=0;n<r.rules.length;n++)t=r.rules[n],7===t.type||8===t.type?s+=t.cssText:1===t.type?s+=re(t,e):4===t.type||12===t.type?o+=ne(e,t):console.warn(`CSS Rule of type "${t.type}" is not currently supported by Cue Components.`);s+=o,X.compiler.innerHTML="",X.components.innerHTML+=s}(e,t,h),"function"==typeof s.initialize&&(a.initialize=s.initialize),"function"==typeof s.disconnectedCallback&&(a.disconnected=s.disconnectedCallback)}}connectedCallback(){if(!1===i){i=!0;const e={};if(s.data)for(const t in s.data){const n=s.data[t];e[t]=n.value,n.value&&n.value.id===P?c.bindings[t]=n.value:"function"==typeof n.value?c.computed.set(t,new H(t,n.value)):c.static[t]=n.value,"function"==typeof n.reaction&&(c.reactions[t]=n.reaction)}c.computed.size&&(c.computed=N(e,c.computed))}if(this.hasAttribute("slot"))return;const e=this[V];if(!1===e.initialized){e.initialized=!0,e._data=Object.assign(r(c.static),e._data);const t=e.computedProperties;if(e.data=new Proxy({},{set:oe,get:(n,r)=>c.bindings[r]?c.bindings[r].get():t.has(r)?t.get(r).value(e.data):e._data[r]}),c.computed.size)for(const e of c.computed.entries()){const n=e[1];t.set(e[0],new H(n.ownPropertyName,n.computation,n.sourceProperties))}e.dependencyGraph=function(e){const t=new Map;let n,r,s;for(n of e.values())for(r=0;r<n.sourceProperties.length;r++)s=n.sourceProperties[r],t.has(s)?t.get(s).push(n):t.set(s,[n]);return t}(e.computedProperties);for(const t in c.reactions)e.reactions[t]=n=>{c.reactions[t](e.refs,n,e.data)};if(l.__hasSlots){let e=null;if(this.hasAttribute("cue-slot")){const t=this.getAttribute("cue-slot");e=Y.get(t)}else if(this.innerHTML){const t=this.querySelectorAll("[slot]");for(let n=0;n<t.length;n++){const r=t[n];e||(e={}),e[r.getAttribute("slot")]=r.outerHTML}}if(e){let t=l.innerHTML,n=!1;for(const r in e)l.__slots[r]&&(n=!0,t=t.replace(l.__slots[r],e[r]));this.innerHTML=t,n&&te(this,h)}else this.innerHTML=l.innerHTML}else this.innerHTML=l.innerHTML;for(const t in h){const n=this.querySelector(h[t]);n&&(n[V]||(n[V]={},n.renderEach=ie),e.refs[t]=n)}if(e.refs.$self=this,this.hasAttribute("cue-data")){const t=this.getAttribute("cue-data"),n=J.get(t),s=r(e._data),o=r(n);e._data=n,Object.assign(e._data,s,o)}if(this.hasAttribute("cue-func")){const e=this.getAttribute("cue-func"),t=K.get(e);for(const e in t)f.prototype[e]=t[e]}for(const t in e.reactions)S.cueCallback(e.reactions[t],e.data[t]);S.react(),requestAnimationFrame((()=>{if(a.initialize.call(this,e.refs),this.hasAttribute("cue-init")){const t=this.getAttribute("cue-init");F.get(t).call(this,e.refs)}}))}for(const t in c.bindings)e.dependencyGraph.has(t)&&e.subscriptions.push(c.bindings[t].store.subscribe(c.bindings[t].key,(()=>S.cueComputations(e.dependencyGraph,e.reactions,t,e.data)))),e.reactions[t]&&e.subscriptions.push(c.bindings[t].store.subscribe(c.bindings[t].key,e.reactions[t]))}disconnectedCallback(){const e=this[V],t=e.subscriptions;for(;t.length;)t.pop().unsubscribe();a.disconnected.call(this,e.refs)}getData(e){if(!e){const e=this[V],t={};let n;for(n in c.bindings)t[n]=c.bindings[n].get();for(n in e._data)t[n]=e._data[n];return t}return this[V].data[e]}setData(e,t){if("object"==typeof e)for(const t in e)this.setData(t,e[t]);if(c.computed.has(e))throw new Error(`You can not set property "${e}" because it is a computed property.`);const s=this[V];c.bindings[e]&&!n(c.bindings[e].get(!1),t)?(s.dataEvent.detail.key=e,s.dataEvent.detail.value=r(t),this.dispatchEvent(s.dataEvent),c.bindings[e].set(t)):n(s._data[e],t)||(s._data[e]=t,s.dataEvent.detail.key=e,s.dataEvent.detail.value=r(t),this.dispatchEvent(s.dataEvent),s.reactions[e]&&S.cueCallback(s.reactions[e],t),s.dependencyGraph.has(e)&&S.cueComputations(s.dependencyGraph,s.reactions,e,s.data),S.react())}}for(const e in s)"function"==typeof s[e]&&"initialize"!==e&&(f.prototype[e]=s[e]);f.prototype.renderEach=ie,f.prototype.autoBind=ae,customElements.define(e,f),G.add(e.toUpperCase());const d="<"+e,p="</"+e+">";return(e={})=>function(e,t,n,r){let s=e,o=null;for(const e in r){const t=r[e];if("string"==typeof t)s+=" "+e+'="'+t+'"';else{++B;const n=""+B;"data"===e?(J.set(n,t),s+=' cue-data="'+n+'"'):"slots"===e?(Y.set(n,t),s+=' cue-slot="'+n+'"'):"initialize"===e?(F.set(n,t),s+=' cue-init="'+n+'"'):"function"==typeof t&&(o||(o={}),o[e]=t)}}if(o){++B;const e=""+B;K.set(e,o),s+=' cue-func="'+e+'"'}return s+=">"+t+n,s}(d,l.innerHTML,p,e)},extend:(e,t)=>(n={})=>e(Object.assign(t,n)),create(e){if("string"!=typeof(e=(e="function"==typeof e?e():e).trim())||"<"!==e[0])throw new Error('[Cue.js] - Component.create(node) -> argument "node" is not valid HTML: "'+e+'"');return W.innerHTML=e,W.children[0]}};function ee(e,t,n=[]){for(let r,s=0;s<e.children.length;s++)r=e.children[s],r.hasAttribute(t)&&n.push(r),G.has(r.tagName)||ee(r,t,n);return n}function te(e,t){for(let n,r,s,o,i=0;i<e.children.length;i++)n=e.children[i],r=n.getAttribute("$"),r&&(s=n.getAttribute("class"),o=r+ ++B,t["$"+r]="."+o,n.setAttribute("class",s?s+" "+o:o),n.removeAttribute("$")),G.has(n.tagName)||te(n,t);return t}function ne(e,t,n=""){4===t.type?n+="@media "+t.media.mediaText+" {":n+="@supports "+t.conditionText+" {";let r="";for(let s,o=0;o<t.cssRules.length;o++)s=t.cssRules[o],7===s.type||8===s.type?n+=s.cssText:1===s.type?n+=re(s,e):4===s.type||12===s.type?r+=ne(e,s):console.warn(`CSS Rule of type "${s.type}" is not currently supported by Components.`);return n+=r+" }"}function re(e,t){let n="";if(e.selectorText.indexOf(",")>-1){const r=e.selectorText.split(","),s=[];for(let e,n=0;n<r.length;n++)e=r[n].trim(),0===e.lastIndexOf(":root",0)?s.push(e.replace(":root","")):se(e,t)?s.push(e):s.push(t+" "+e);n+=s.join(", ")+e.cssText.substr(e.selectorText.length)}else 0===e.selectorText.lastIndexOf(":root",0)?n+=e.cssText.replace(":root",""):se(e.selectorText,t)?n+=e.cssText:n+=t+" "+e.cssText;return n}function se(e,t){return e===t||0===e.lastIndexOf(t,0)&&Q.indexOf(e.charAt(t.length))>-1}function oe(e,t,n){throw new Error(`Can not change data in reactions: this.${t} = ${n} has been ignored.`)}function ie(e,n,r=t){e=Array.isArray(e)?e:Object.values(e||{});const s=this[V].childData||[];if(this[V].childData=e,0===e.length)this.innerHTML="";else if(0===s.length)for(let t=0;t<e.length;t++)this.appendChild(n(e[t],t,e));else!function(e,t,n,r,s){let o,i,a,c=0,l=0,u=!0,h=t.length-1,f=n.length-1,d=e.firstChild,p=d,g=e.lastChild,m=g;e:for(;u;){let r;for(u=!1,o=t[c],i=n[l];o===i;){if(s(d,i),c++,l++,p=d=d.nextSibling,h<c||f<l)break e;o=t[c],i=n[l]}for(o=t[h],i=n[f];o===i;){if(s(g,i),h--,f--,a=g,m=g=g.previousSibling,h<c||f<l)break e;o=t[h],i=n[f]}for(o=t[h],i=n[l];o===i;){if(u=!0,s(g,i),r=g.previousSibling,e.insertBefore(g,p),m=g=r,l++,h--,h<c||f<l)break e;o=t[h],i=n[l]}for(o=t[c],i=n[f];o===i;){if(u=!0,s(d,i),r=d.nextSibling,e.insertBefore(d,a),a=m=d,d=r,c++,f--,h<c||f<l)break e;o=t[c],i=n[f]}}if(f<l){if(c<=h){let t;for(;c<=h;)0===h?e.removeChild(g):(t=g.previousSibling,e.removeChild(g),g=t),h--}return}if(h<c){if(l<=f)for(;l<=f;)a?e.insertBefore(r(n[l],l,n),a):e.appendChild(r(n[l],l,n)),l++;return}const y=new Array(f+1-l),b=new Map;let v;for(v=l;v<=f;v++)y[v]=-1,b.set(n[v],v);let w=0,C=[];for(v=c;v<=h;v++)b.has(t[v])?(y[b.get(t[v])]=v,w++):C.push(v);if(0===w){for(e.textContent="",v=l;v<=f;v++)e.appendChild(r(n[v],v,n));return}const S=function(e,t){const n=[],r=[],s=new Array(e.length);let o,i,a,c=-1;for(o=t;o<e.length;o++){if(i=e[o],i<0)continue;let t,l=-1,u=n.length;if(u>0&&n[u-1]<=i)a=u-1;else{for(;u-l>1;)t=Math.floor((l+u)/2),n[t]>i?u=t:l=t;a=l}-1!==a&&(s[o]=r[a]),a===c?(c++,n[c]=i,r[c]=o):i<n[a+1]&&(n[a+1]=i,r[a+1]=o)}for(o=r[c];c>=0;o=s[o],c--)n[c]=o;return n}(y,l),x=[];let O=d;for(v=c;v<=h;v++)x[v]=O,O=O.nextSibling;for(v=0;v<C.length;v++)e.removeChild(x[C[v]]);let E,_=S.length-1;for(v=f;v>=l;v--)S[_]===v?(a=x[y[S[_]]],s(a,n[v]),_--):(-1===y[v]?E=r(n[v],v,n):(E=x[y[v]],s(E,n[v])),e.insertBefore(E,a),a=E)}(this,s,e,n,r)}function ae(e="data-bind"){const t=ee(this,e);t.length&&this.addEventListener("input",(n=>{t.indexOf(n.target)>-1&&(n.target.matches('input[type="checkbox"]')?this.setData(n.target.getAttribute(e),n.target.checked?1:0):n.target.matches("select[multiple]")?this.setData(n.target.getAttribute(e),Array.from(n.target.selectedOptions).map((e=>e.value))):this.setData(n.target.getAttribute(e),n.target.value))}))}const ce=e.location.origin+e.location.pathname,le=[ce,e.location.hostname,e.location.hostname+"/",e.location.origin];"/"!==ce[ce.length-1]&&le.push(ce+"/"),e.location.pathname&&"/"!==e.location.pathname&&le.push(e.location.pathname);const ue=["/","#","/#","/#/",...le],he=new URL(ce),fe=Ie(ce),de=new Map,pe=new Set,ge=[];let me=null;const ye={},be={params:{},keepQuery:!0,forceReload:!1,history:"pushState"};let ve=!1,we={},Ce=["/"];e.location.hash&&Ce.push(...e.location.hash.split("/"));const Se={before(e,t){if(xe(),"*"===e)null!==me&&console.warn("[Cue.js] - Router.before(*, filter) - overwriting previously registered wildcard filter (*)"),me=t;else{const{hash:n}=Ae(e);if(de.has(n))throw new Error(`[Cue.js] Router.beforeRoute() already has a filter for ${"#"===n?`${e} (root url)`:e}`);de.set(n,t)}},on(e,t){if(xe(),"*"===e)-1===ge.indexOf(t)&&ge.push(t);else{const{hash:n}=Ae(e);if(pe.has(n))throw new Error('[Cue.js] Router.onRoute() already has a action for "'+n=="#"?e+" (root url)":e+'".');pe.add(n),function(e,t){const n=ye["/"]||(ye["/"]={action:void 0,children:{}});if("#"===e)n.action=t;else{const r=e.split("/"),s=r[r.length-1];r.reduce(((e,n)=>e[n]?(n===s&&(e[n].action=t),e[n].children):(e[n]={action:n===s?t:void 0,children:{}}).children),n.children)}}(n,t)}},hasFilter(e){if("*"===e)return null!==me;{const{hash:t}=Ae(e);return de.has(t)}},hasAction(e){if("*"===e)return ge.length>0;{const{hash:t}=Ae(e);return pe.has(t)}},navigate(t,n={}){if(0===t.lastIndexOf("http",0)&&t!==e.location.href)return e.location.href=t;const{hash:r,query:s,rel:o}=Ae(t);!0===(n=Object.assign({},be,n)).keepQuery?Object.assign(we,ke(s)):we=ke(s),me?me(o,we,(e=>{e!==o?_e(e):de.has(r)?de.get(r)(o,we,(e=>{e!==o?_e(e):Oe(r,s,n.keepQuery,n.history)})):Oe(r,s,n.keepQuery,n.history)})):de.has(r)?de.get(r)(o,we,(e=>{e!==o?_e(e):Oe(r,s,n.keepQuery,n.history)})):Oe(r,s,n.keepQuery,n.history)},resolve(t={}){this.navigate(e.location.href,t)},getQueryParameters:e=>e?we[e]:Object.assign({},we),addQueryParameters(e,t){if(void 0===t&&"object"==typeof e)for(const t in e)we[t]=e[t];else we[e]=t;Ee()},setQueryParameters(e){we=r(e),Ee()},removeQueryParameters(e){e?Array.isArray(e)?e.forEach((e=>{we[e]&&delete we[e]})):we[e]&&delete we[e]:we={},Ee()}};function xe(){ve||(ve=!0,e.addEventListener("popstate",(()=>{Se.navigate(e.location.href,{history:"replaceState",forceReload:!1})})))}function Oe(t,n,r,s){!function(e){const t=fe+(e="#"===e?"":e);for(let e=0;e<ge.length;e++)ge[e](t,we)}(t),function(e){const t=["/"];"#"!==e&&t.push(...e.split("/"));const n=function(e,t){const n=[];for(let r=0;r<e.length;r++)for(let s=0;s<t.length;s++)if(e[r]===t[s]){n.push(e[r]);break}return n}(Ce,t),r=[n[n.length-1]];t.length>n.length&&r.push(...function(e,t){const n=[];for(let r=e.length;r<t.length;r++)n.push(t[r]);return n}(n,t));let s,o=ye;for(let e=0;e<n.length;e++){if(s=n[e],s===r[0]){s=r.shift();break}o=o[s].children}for(;o[s]&&r.length;)o[s].action&&o[s].action(r.join("/"),we),o=o[s].children,s=r.shift();o[s]&&o[s].action&&o[s].action("/",we);Ce=t}(t),he.hash=t,he.search=r?Me(we):n,e.history[s](null,document.title,he.toString())}function Ee(){he.search=Me(we),e.history.replaceState(null,document.title,he.toString())}function _e(t){return 0===t.lastIndexOf("http",0)?e.location.href=t:Se.navigate(t,{history:"replaceState",forceReload:!1})}function Ae(e){if(ue.indexOf(e)>-1)return{rel:"/",abs:ce,hash:"#",query:""};if("?"===e[0]||"#"===e[0]){const{hash:t,query:n}=Pe(e);return{rel:Te(t),abs:ce+t,hash:t||"#",query:n}}if("?"!==(e=function(e){const t=(r=e,s=ue,s.filter((e=>0===r.lastIndexOf(e,0))).sort(((e,t)=>t.length-e.length))[0]),n=t?e.substr(t.length):e;var r,s;return 0===n.lastIndexOf("/",0)?n.substr(1):n}(e))[0]&&"#"!==e[0])throw new Error('Invalid Route: "'+e+'". Non-root paths must start with ? query or # hash.');const{hash:t,query:n}=Pe(e);return{rel:Te(t),abs:ce+t,hash:t||"#",query:n}}function Pe(e){const t=e.indexOf("#"),n=e.indexOf("?");if(-1===t)return{hash:"",query:Ie(new URL(e,ce).search)};if(-1===n)return{hash:Ie(new URL(e,ce).hash),query:""};const r=new URL(e,ce);if(n<t)return{hash:Ie(r.hash),query:Ie(r.search)};let s=r.hash;const o=s.slice(s.indexOf("?"));return s=s.replace(o,""),{hash:Ie(s),query:Ie(o)}}function Te(e){return("#"===e?"/":e)||"/"}function Ie(e){return"/"===e[e.length-1]?e.substring(0,e.length-1):e}function ke(e){const t={};if(e.length>1){const n=e.substring(1).replace(/\+/g," ").replace(/;/g,"&").split("&");for(let e,r,s=0;s<n.length;s++)e=n[s].split("=",2),r=decodeURIComponent(e[0]),r&&(t[r]=!(e.length>1)||decodeURIComponent(e[1]))}return t}function Me(e){let t="?";for(const n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return"?"===t?t="":"&"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t}const je={Component:Z,Store:$,Server:u,Router:Se};"object"==typeof module&&"object"==typeof module.exports?module.exports=je:"function"==typeof define&&define.amd?define("Cue",[],(function(){return je})):e.Cue=je}(window||this);