(function(e){function t(e,t){for(let n=0;n<t.length;n++)e.push(t[n]);return e}function n(e){return e&&e.constructor===L?s(e):Q(e)?r(e):void 0}function s(e){const t={};let s,r;for(s in e)r=e[s],t[s]="object"==typeof r?n(r):r;return t}function r(e){const t=[];for(let s,r=0;r<e.length;r++)s=e[r],t[r]="object"==typeof s?n(s):s;return t}function a(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){const i=Q(e),n=Q(t);if(i!==n)return!1;if(i&&n)return l(e,t);const s=e.constructor===L,r=t.constructor===L;if(s!==r)return!1;if(s&&r)return o(e,t)}return e!==e&&t!==t}function o(e,t){const n=W(e),s=W(t);if(n.length!==s.length)return!1;for(let r,a=0;a<n.length;a++)if(r=n[a],-1===s.indexOf(r)||e[r]!==t[r])return!1;return!0}function l(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function d(e,{computed:t}){M(se,{allProperties:e,derivedProperties:t});const i=new Proxy(e,{get:u});t.forEach(e=>{se.derivative=e;try{e.computation.call(i,i)}catch(t){}}),se.derivative=null,se.allProperties=null,se.dependencyGraph=null,se.derivedProperties=null}function u(e,t){const{derivative:i,allProperties:n,dependencyGraph:s,derivedProperties:r}=se;if(!n.hasOwnProperty(t))throw new Error(`Unable to resolve dependency "${t}" of computed prop "${i.ownPropertyName}".`);if(s.has(t)?s.get(t).push(i):s.set(t,[i]),-1===i.sourceProperties.indexOf(t)&&i.sourceProperties.push(t),r.has(t)){const e=r.get(t);-1===e.subDerivatives.indexOf(i)&&e.subDerivatives.push(i),-1===i.superDerivatives.indexOf(e)&&i.superDerivatives.push(e)}}function p(e,t){t===re?(c(e),f(e)):t===ae&&g(e)}function c(e){if(e.superDerivatives.length)for(let t,n=0;n<e.superDerivatives.length;n++)t=e.superDerivatives[n],t.stopPropagation=!1,t.superDerivatives.length&&c(t)}function f(e,t=!0){if(e.stopPropagation=t,e.subDerivatives.length)for(let t,n=0;n<e.subDerivatives.length;n++)t=e.subDerivatives[n],t.observers.length&&(e.stopPropagation=!1,f(t))}function g(e,t=!1){e.stopPropagation=t;for(let n,s=0;s<e.superDerivatives.length;s++)n=e.superDerivatives[s],n.observers.length?n.stopPropagation=!0:g(n)}function v(e){return new Proxy(e,{get:m,set:_,deleteProperty:h})}function m(e,t){if(t===oe||t===de)return e[t];if(t===le)return e;const i=X(e,t);if(!i||i[oe])return i;if(Q(i)||i.constructor===L)return v(fe.assignTo(i,e,t));if(q.has(t)&&"function"==typeof i){const n=e[de];return n.get(t)||n.set(t,y(i)).get(t)}return i}function _(e,t,i){if(!ne){const n=e[oe],s=n.valueCache.get(t);if(i){const n=i[oe];n&&null===n.parent&&(n.parent=e,n.ownPropertyName=t)}if(i!==s){let r=n.attemptCue(t,i,s);if(null!==n.parent){const t=Q(e)?e.slice():M({},e);r+=n.parent.attemptCue.call(n.parent,n.ownPropertyName,e,t)}return J(e,t,i),n.valueCache.set(t,i),0<r&&!0&&C(),!0}}else console.warn(`Setting of "${t}" ignored. Don't mutate state in a reaction. Refactor to computed properties instead.`)}function h(e,t){if(!!ne)console.warn(`Deletion of "${t}" ignored. Don't mutate state in a reaction. Refactor to computed properties instead.`);else if(e.hasOwnProperty(t)){const i=e[oe],n=i.valueCache.get(t);let s=i.attemptCue(t,void 0,n);if(i.parent){const t=Q(e)?e.slice():M({},e);s+=i.parent.attemptCue.call(i.parent,i.ownPropertyName,e,t)}return $(e,t),i.valueCache.delete(t),0<s&&!0&&C(),!0}}function y(e){return function(...t){if(!ne){const i=this[oe],n=this[le];if(null===i.parent)return Z(e,n,t);const s=n.slice(),r=Z(e,n,t);return l(s,n)||!i.parent.attemptCue.call(i.parent,i.ownPropertyName,n,s)||C(),r}console.warn(`Array mutation ignored. Don't mutate state in a reaction. Refactor to computed properties instead.`)}}function b(e,t,n,s,r,a){let o,d,u;if(s)for(o=0;o<s.length;o++)u=s[o],-1===ue.indexOf(u)&&ue.push(u,{property:e,value:t,oldValue:n});if(r&&(d=r.length)&&!1===a){for(o=0;o<d;o++)r[o].updateProperty(e,t);let i,n;for(o=0;o<d;o++)u=r[o],i=u._value,n=u.value,u.hasChanged&&b(u.ownPropertyName,n,i,u.observers,u.subDerivatives,u.stopPropagation)}}function P(e,t,n,s,r,a){let o,l;if(s)for(o=0;o<s.length;o++)l=s[o],-1===ue.indexOf(l)&&ue.push(l,{property:e,value:t,oldValue:n});if(r&&!1===a)for(o=0;o<r.length;o++)r[o].updateProperty(e,t)}function C(){ne=!0;const e=ue.length;for(let t=0;t<e;t+=2)ue[t](ue[t+1]);ue.splice(0,e),ne=!1}function E(e,n,a,o,l){const d="object"===e?M(A(n.prototype),s(a.defaults)):t(V([],n.prototype),r(a.defaults)),u=d[oe]=new fe(o,l);let p,c,f,g,v;return a.computed.forEach(e=>{for(c=new pe(e.ownPropertyName,e.computation,e.sourceProperties),u.derivedProperties.set(e.ownPropertyName,c),p=0;p<e.sourceProperties.length;p++)f=e.sourceProperties[p],g=u.derivativesOf.get(f),g?g.push(c):u.derivativesOf.set(f,[c]);for(p=0;p<e.superDerivatives.length;p++)v=u.derivedProperties.get(e.superDerivatives.ownPropertyName),c.superDerivatives.push(v),v.subDerivatives.push(c);c.fillCache(d)}),d}function D(e){let t;if(Q(e.defaults)){if(e.static){let i;t=t=>(e.initialize&&(i[oe].isInitializing=!0,e.initialize.call(i,t),i[oe].isInitializing=!1),i),t.prototype=A(Array.prototype),i=v(E("array",t,e))}else t=i=>{const n=v(E("array",t,e));return e.initialize&&(n[oe].isInitializing=!0,e.initialize.call(n,i),n[oe].isInitializing=!1),n},t.prototype=A(Array.prototype);}else if(e.static){let i;t=t=>(e.initialize&&(i[oe].isInitializing=!0,e.initialize.call(i,t),i[oe].isInitializing=!1),i),t.prototype={},i=v(E("object",t,e))}else t=i=>{const n=v(E("object",t,e));return e.initialize&&(n[oe].isInitializing=!0,e.initialize.call(n,i),n[oe].isInitializing=!1),n},t.prototype={};return t}function O(e,t){for(var i in t.computed)G(e.prototype,i,{get(){return this[oe].derivedProperties.get(i).value},configurable:!0,enumerable:!0});for(i in t.actions)e.prototype[i]=t.actions[i];e.prototype.imports=t.imports,e.prototype[de]=new Map}function U(e){const t="function"==typeof e?e(ee.state):e;if(!t||t.constructor!==L)throw new TypeError(`Can't create State Module because the config function does not return a plain object.`);const n=Q(t.props)?"array":t.props&&t.props.constructor===L?"object":"illegal";if("illegal"==n)throw new TypeError(`State Module requires "props" object (plain object or array) containing default and optional computed properties.`);const s={defaults:"array"==n?[]:{},computed:new Map,initialize:void 0,actions:{},static:!0===t.static,imports:t.imports};let r,a,o;if("array"==n)for(a=0;a<t.props.length;a++)o=t.props[a],"function"==typeof o?s.computed.set(a,{ownPropertyName:a,computation:o,sourceProperties:[],subDerivatives:[],superDerivatives:[]}):s.defaults.push(o);else for(r in t.props)o=t.props[r],"function"==typeof o?s.computed.set(r,{ownPropertyName:r,computation:o,sourceProperties:[],subDerivatives:[],superDerivatives:[]}):s.defaults[r]=o;for(r in d(t.props,s),s.computed=ce.from(s.computed),t)if(o=t[r],"initialize"!==r)"function"==typeof o&&(s.actions[r]=o);else if("function"==typeof o)s[r]=o;else throw new TypeError(`"${r}" is a reserved word for Cue State Modules and must be a function but is of type ${typeof o}`);return s}function w(e,t){return i=>{const n=U(t),s=D(n);return O(s,n),ie.set(e,s),s.call(null,i)}}function j(e){let t=0;return(j=function(e){let i,s="";for(const n=t.toString(26).split("");i=n.shift();)s+="abcdefghijklmnopqrstuvwxyz"[parseInt(i,26)];return t++,`${e}-${s}`}).call(null,e)}function z(e,t,n){n.classList.replace(e,t);for(let s=0;s<n.children.length;s++)z(e,t,n.children[s])}function N(e,t){let i,n,s,r,a,o,l,d;for(i in e){for(s in o=j(i),l=ye.insertRule(`.${o} {}`,ye.cssRules.length),d=ye.cssRules[l].style,n=e[i],n)(":"===s[0]||" "===s[0])&&(r=ye.insertRule(`.${o}${s} {}`,ye.cssRules.length),a=ye.cssRules[r].style,M(a,n[s]),delete n[s]);M(d,n),e[i]=o,t&&z(i,o,t)}return e}function x(e){let t,i,n,s,r,a,o,l;for(t in e){for(a in i=j(t),n=ye.insertRule(`@keyframes ${i} {}`,ye.cssRules.length),s=ye.cssRules[n],r=e[t],r)s.appendRule(`${a}% {}`),o=s.cssRules.length-1,l=s.cssRules[o].style,M(l,r[a]);e[t]=i}return e}function I(e){if("string"==typeof e)switch(e=e.trim(),e[0]){case"<":return document.createRange().createContextualFragment(e).firstChild;case".":return document.getElementsByClassName(e.substring(1))[0];case"#":return document.getElementById(e.substring(1));case"[":return document.querySelectorAll(e)[0];default:throw new TypeError(`Can't create template from string because it's not html markup or a valid selector.`);}else if(e instanceof Element)return e}function R(e){const t="function"==typeof e?e.call(null,ee.ui):e;if(!t||t.constructor!==L)throw new TypeError(`Can't create UI Module because the configuration function did not return a plain object.`);if(!t.template)throw new TypeError(`UI Module requires "template" property that specifies a DOM Element. // expect(template).toEqual(HTMLString || Selector || DOMNode).`);const i=I(t.template);return{template:i,imports:t.imports||null,styles:t.styles?N(t.styles,i):null,keyframes:t.keyframes?x(t.keyframes):null,initialize:t.initialize||null,didMount:t.didMount||k,didUpdate:t.didUpdate||k,willUnmount:t.willUnmount||k}}function S(e){let t=null;return i=>{t||(t=R(e));const n=new be(t.template.cloneNode(!0),t.imports,t.styles,t.keyframes);return t.initialize&&t.initialize.call(n,i),n.element}}const k=()=>{},q=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]),L=Object,T=Array,M=L.assign,A=L.create,G=L.defineProperty,F=L.defineProperties,V=L.setPrototypeOf,B=L.getPrototypeOf,H=L.prototype.toString,W=L.keys,Y=L.entries,Q=T.isArray,J=Reflect.set,X=Reflect.get,Z=Reflect.apply,$=Reflect.deleteProperty,K={},ee={core:K,state:A(K),ui:A(K)},te={};{const e=new Map,t=`Can't add listener because the provided arguments are invalid.`;let i,n,s,r,a,o=[];const l=(t,i,n,s)=>{const r={handler:i,scope:n,once:s};e.has(t)?e.get(t).push(r):e.set(t,[r])},d=(e,t,s)=>{for(i in e)if(n=e[i],"function"==typeof n)l(i,n,t,s);else throw new TypeError(`Can't add listener because handler for "${i}" is not a function but of type ${typeof n}`)};M(te,{on:(e,i,n)=>{if(e&&e.constructor===L)s="object"==typeof i?i:null,d(e,s,!1);else if("string"==typeof e&&"function"==typeof i)s="object"==typeof n?n:null,l(e,i,s,!1);else throw new TypeError(t)},once:(e,i,n)=>{if(e&&e.constructor===L)s="object"==typeof i?i:null,d(e,s,!0);else if("string"==typeof e&&"function"==typeof i)s="object"==typeof n?n:null,l(e,i,s,!0);else throw new TypeError(t)},off:t=>{e.delete(t)},trigger:(t,...n)=>{if(r=e.get(t)){for(let e=0;e<r.length;e++)a=r[e],a.handler.apply(a.scope,n),a.once&&o.push(a);o.length&&(e.set(t,r.filter(e=>-1===o.indexOf(e))),o.length=0),r=null}}})}const ie=new Map;let ne=!1;const se={derivative:null,allProperties:null,derivedProperties:null},re=-1,ae=1,oe=Symbol("\uD83C\uDF51"),le=Symbol("Target Object"),de=Symbol("Intercepted Methods"),ue=[];ee.state=A(ee.core,{import:{value:function(e){const t=ie.get(e);if(!t)throw new ReferenceError(`Can't import State Module because nothing is registered under "${e}".`);return t}}});class pe{constructor(e,t,i){this.ownPropertyName=e,this.computation=t,this.sourceProperties=i,this.subDerivatives=[],this.superDerivatives=[],this.observers=[],this.valueCache=A(null),this.intermediate=void 0,this._value=void 0,this.stopPropagation=!1,this.needsUpdate=!1,this.hasChanged=!1}get value(){return this.needsUpdate&&(this.intermediate=this.computation.call(null,this.valueCache),a(this._value,this.intermediate)?this.hasChanged=!1:(this._value=this.intermediate,this.hasChanged=!0),this.needsUpdate=!1),this._value}updateProperty(e,t){this.valueCache[e]=t,this.needsUpdate=!0}fillCache(e){for(let t,n=0;n<this.sourceProperties.length;n++)t=this.sourceProperties[n],this.valueCache[t]=e[t];this.needsUpdate=!0}dispose(e=!0){let t;for(this.valueCache=void 0,this.observers=void 0,this.intermediate=void 0,this._value=void 0,t=0;t<this.superDerivatives.length;t++)this.superDerivatives[t].subDerivatives=this.superDerivatives[t].subDerivatives.filter(e=>e!==this),g(this.superDerivatives[t],!0);for(t=0;t<this.subDerivatives.length;t++)this.subDerivatives[t].dispose(!1);if(e)for(t=0;t<this.superDerivatives.length;t++)p(this.superDerivatives[t],re);this.superDerivatives=void 0}}const ce={source:null,visited:[],from(e){this.source=e;const t=new Map;for(const i of e.keys())this._visit(i,[],t);return this.source=null,this.visited.splice(0,this.visited.length),t},_visit(e,t,n){if(this.source.has(e)){t.push(e),this.visited.push(e);const s=this.source.get(e);for(let e,r=0;r<s.sourceProperties.length;r++){if(e=s.sourceProperties[r],-1!==t.indexOf(e))throw new Error(`Circular dependency. "${s.ownPropertyName}" is required by "${e}": ${t.join(" -> ")}`);-1===this.visited.indexOf(e)&&this._visit(e,t,n)}n.has(e)||n.set(e,s)}}};class fe{static assignTo(e,t,i){return e[oe]=new this(t,i),e}constructor(e=null,t=""){this.parent=e,this.ownPropertyName=t,this.isInitializing=!1,this.valueCache=new Map,this.observersOf=new Map,this.derivativesOf=new Map,this.derivedProperties=new Map}addChangeReaction(e,t,i=null){if("function"!=typeof t)throw new TypeError(`Property change reaction for "${e}" is not a function...`);const n=null===i?t:t.bind(i);if(this.observersOf.has(e)?this.observersOf.get(e).push(n):this.observersOf.set(e,[n]),this.derivedProperties.has(e)){const t=this.derivedProperties.get(e);t.observers.push(n),p(t,re)}return n}removeChangeReaction(e,t){if(this.observersOf.has(e)){const n=this.observersOf.get(e),s=this.derivedProperties.get(e);if(t===void 0)this.observersOf.delete(e),s&&(s.observers.splice(0,s.observers.length),p(s,ae));else if("function"==typeof t){let r=n.indexOf(t);-1<r?n.splice(r,1):console.warn(`Can't remove the passed handler from reactions of "${e}" because it is not registered.`),s&&(r=s.observers.indexOf(t),-1<r?(s.observers.splice(r,1),p(s,ae)):console.warn(`Can't remove the passed handler from observers of derived property "${e}" because it is not registered.`))}}else console.warn(`Can't unobserve property "${e}" because no reaction has been registered for it.`)}attemptCue(e,t,i){const n=this.derivativesOf.get(e),s=this.observersOf.get(e);return n||s?(b(e,t,i,s,n,!1),1):0}}const ge={State:(e,t)=>{if("string"!=typeof e)throw new TypeError(`Can't create Cue State Module. First argument must be name of type string but is of type "${typeof e}".`);else if(ie.has(e))throw new Error(`A State Module has already been registered under name "${e}". Unregister, use a unique name or consider namespacing.with.dots-or-hyphens...`);const i=w(e,t);return ie.set(e,i),i}};ge.State.isState=e=>!!e[oe];const ve=new Map;ee.ui=A(ee.core,{import:{value:function(e){const t=ve.get(e);if(!t)throw new ReferenceError(`Can't import UI Component because nothing is registered under "${e}".`);return t}}});const me=Symbol("ClassName Map"),_e=Symbol("Original ClassList");class he{constructor(e,t){if(!e)throw new TypeError(`Can't create MappedClassList. First argument has to be a plain Object, 2D Array or a Map but is ${JSON.stringify(e)}.`);else e.constructor===L?e=new Map(Y(e)):Q(e)&&(e=new Map(e));F(this,{[me]:{value:e},[_e]:{value:t.classList}})}item(e){return this[_e].item(e)}has(e){return this.contains(e)}contains(e){return this[_e].contains(this[me].get(e)||e)}add(e){this[_e].add(this[me].get(e)||e)}remove(e){this[_e].remove(this[me].get(e)||e)}replace(e,t){this[_e].replace(this[me].get(e)||e,this[me].get(t)||t)}toggle(e){this[_e].toggle(this[me].get(e)||e)}}const ye=(()=>{const e=document.createElement("style");return e.id="CUE-STYLES",document.head.appendChild(e),e.sheet})();class be{constructor(e,t,i,n){this.element=e,this.imports=t,this.styles=i,this.keyframes=n,i&&W(i).length&&G(e,"classList",{value:new he(i,e),enumerable:!0,writable:!1,configurable:!0})}}const Pe={UI:(e,t)=>{if("string"!=typeof e)throw new TypeError(`Can't create Cue-UI Module. First argument must be name of type string but is of type "${typeof e}".`);else if(!t||"function"!=typeof t&&t.constructor!==Object)throw new TypeError(`Can't create Cue-UI Module. Second argument must be module initializer function or configuration object but is of type "${typeof t}".`);else if(ve.has(e))throw new Error(`A UI Module has already been registered under name "${e}". Unregister, use a unique name or consider namespacing.with.dots-or-hyphens...`);const i=S(t);return ve.set(e,i),i}};Pe.UI.isComponent=e=>e instanceof be;const Ce=new Map,Ee=e=>"string"==typeof e&&2<e.length&&-1!==e.indexOf("-"),De=e=>e.split("-"),Oe=(e,t)=>e.didInstall?e.extensionPoint:(e.extensionPoint=e.installer.call(null,ee,t),e.didInstall=!0,e.extensionPoint),Ue={mount(e=document.body,t=void 0){if(!0===this.mounted)throw new Error("Cue instance already mounted.");if(e="string"==typeof e?document.querySelector(e):e instanceof Element?e:null,!e)throw new TypeError(`Target is not HTMLElement or Selector of element that is in the DOM.`);const i=ee.state.import(this.state.module),n=ee.ui.import(this.ui.component);return this.state.instance=i(t),this.ui.element=n(this.state.instance),e.appendChild(this.ui.element),this.lifeCycle.didMount.call(this),this.mounted=!0,this},unmount(){if(!1===this.mounted)throw new Error(`Can't unmount Cue instance because it has not been mounted.`);return this.lifeCycle.willUnmount.call(this),this.ui.element.parentElement.removeChild(this.ui.element),this.ui.element=null,this.state.instance=null,this.mounted=!1,this}};e||(e=window);const we=e.Cue=M(function(e){if(!e||e.constructor!==L)throw new TypeError("[Cue]: config is not an object.");if("string"!=typeof e.state)throw new TypeError(`[Cue]: config.state is "${typeof e.state}" and not a name. Specify the name of a state module to use as the root state for the Cue instance.`);if("string"!=typeof e.ui)throw new TypeError(`[Cue]: config.ui is "${typeof e.ui}" and not a name. Specify the name of a ui component to use as the root element for the Cue instance.`);return M(A(Ue),{state:{module:e.state,instance:null},ui:{component:e.ui,element:null},mounted:!1,lifeCycle:{didMount:e.didMount||k,willUnmount:e.willUnmount||k}})},te,{Plugin:(e,t,i)=>{if(!Ee(e))throw new Error(`Plugin must be defined with a namespaced-name (vendor-plugin) of type string as the first argument.`);const[n,s]=De(e);if(!t&&!i){const t=Ce.get(n);if(t){const i=t.get(s);if(i)return i;throw new Error(`No Plugin with name ${e} has been registered under "${n}".`)}else throw new Error(`No Plugin has been registered under "${t}".`)}else{if("function"!=typeof t)throw new Error(`Plugin must be defined with an installable function as the second argument.`);const r=Ce.get(n)||Ce.set(n,new Map).get(n);if(r.has(s))return console.warn(`A plugin with name "${s}" has already been registered under "${n}". Skipping installation...`),r.get(s).name;const a={installer:t,didInstall:!1,name:e,extensionPoint:void 0};return r.set(s,a),i&&Oe(a),e}},use:(e,t)=>{if(!Ee(e))throw new Error(`pluginName must be a namespaced-string (vendor-plugin).`);const[i,n]=De(e),s=Ce.get(i);if(s){const e=s.get(n);if(e)return Oe(e,t)}throw new Error(`No Plugin has been registered under "${e}".`)}},ge,Pe);console.log(`%c🍑 Cue.js - Version ${.9}`,"color: rgb(0, 140, 255)"),we.Plugin("cue-math",e=>{const t=Math,i=t.max,n=t.min,s=t.random,r=t.abs,a=t.pow,o=t.round,l=t.floor,u=t.ceil,p=t.PI;return e.core.Math={clamp(e,t,s){return i(e,n(t,s))},lerp(e,t,i){return(1-i)*e+i*t},smoothStep(e,t,i){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))},translate(e,t,i,n,s){return i+(s-e)*(n-i)/(t-e)},createTranslator(e,t,i,n){return 0===e&&0<i?e=>e*(n-i)/t+i:0===i&&0<e?i=>(i-e)*n/(t-e):0===e===i?e=>e*n/n:this.translate},convertBits(e,t,i){return 32>e?32>t?i*a(2,t)/a(2,e):i/a(2,e):32>t?o(i*a(2,t)):i},randomIntBetween(e,t){return l(s()*(t-e+1)+e)},randomFloatBetween(e,t){return s()*(t-e)+e},isOdd(e){return 1&e},isEven(e){return!(1&e)},degreesToRadians(e){return e*(p/180)},radiansToDegrees(e){return e*(180/p)},scale(e,t){const n=e.length-1,s=t-1;let r,o=0,p=0,f=0,g=0;for(r=1;r<s;r++)o=r*(n/s),p=l(o),f=u(o),g=o-p,e[r]=e[p]+(e[f]-e[p])*g;return e[s]=e[n],this},closest(e,t){return e.reduce((e,i)=>r(i-t)<r(e-t)?i:e)},smallest(e){let t=1/0;for(let n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return t===1/0?void 0:t},largest(e){let t=-Infinity;for(let n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return t===-Infinity?void 0:t}}},!0),we.Plugin("cue-string",e=>e.core.String={createUID(){let e=0;return(this.createUID=function(){let t,i="";for(const n=e.toString(26).split("");t=n.shift();)i+="abcdefghijklmnopqrstuvwxyz"[parseInt(t,26)];return e++,i}).call(this)},toCamelCase(e){const t=document.createElement("div");return t.setAttribute(`data-${e}`,""),W(t.dataset)[0]},toDashedCase(e){const t=document.createElement("div");return t.dataset[e]="",t.attributes[0].name.substr(5)}}),we.Plugin("cue-array",e=>{const t=Array.isArray;return e.core.Array={flatten(e){return e.reduce((e,i)=>e.concat(t(i)?this.flatten(i):i),[])},insertEveryNth(e,t,s){for(let n=e.length;0<--n;)0==n%s&&e.splice(n,0,t);return this},removeEveryNth(e,t){for(let n=e.length;--n;)0==n%t&&e.splice(n,1);return this},removeRange(e,t,i){return e.splice(t,i-t),this},merge(e,...t){let n,r,a;for(n=0;n<t.length;n++)for(a=t[n],r=0;r<a.length;r++)e.push(a[r]);return this}}},!0),we.Plugin("cue-equality",e=>{const t=Object,i=Array.isArray;return t.assign(e.core,{isEqual(e,n,s=!1){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){const r=e.constructor===t,a=n.constructor===t;if(r!==a)return!1;if(r&&a)return this.arePlainObjectsEqual(e,n,s);const o=i(e),l=i(n);if(o!==l)return!1;if(o&&l)return this.areArraysEqual(e,n,s);const d=e instanceof Map,u=n instanceof Map;if(d!==u)return!1;if(d&&u)return this.areMapsEqual(e,n,s);const p=e instanceof Set,c=n instanceof Set;if(p!==c)return!1;if(p&&c)return this.areSetsEqual(e,n,s);const f=e instanceof Date,g=n instanceof Date;if(f!==g)return!1;if(f&&g)return e.getTime()===n.getTime();const v=e instanceof RegExp,m=n instanceof RegExp;return v===m&&(v&&m?e.toString()===n.toString():this.arePlainObjectsEqual(e,n,s))}return e!==e&&n!==n},areArraysEqual(e,t,n=!1){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!this.isEqual(e[s],t[s],n))return!1;return!0},arePlainObjectsEqual(e,t,n=!1){const s=W(e),r=W(t);if(s.length!==r.length)return!1;for(let a,o=0;o<s.length;o++)if(a=s[o],-1===r.indexOf(a)||!this.isEqual(e[a],t[r[o]],n))return!1;return!0},areMapsEqual(e,t,n=!1){if(e.size!==t.size)return!1;const s=Array.from(e),r=Array.from(t);for(let a,o,l=0;l<s.length;l++)if(a=s[l],o=r[l],a[0]!==o[0]||!this.isEqual(a[1],o[1],n))return!1;return!0},areSetsEqual(e,t,n=!1){if(e.size!==t.size)return!1;const s=Array.from(e),r=Array.from(t);for(let a=0;a<s.length;a++)if(!this.isEqual(s[a],r[a],n))return!1;return!0}})},!0),we.Plugin("cue-clone",e=>{const t=Object,i=t.prototype.toString,n=Array.isArray,s=Object.getPrototypeOf;return t.assign(e.core,{clone(e,t=!1){if(n(e))return this.cloneArray(e,t);if("object"==typeof e&&null!==e){if(i.call(e)==="[object Object]"||null===s(e))return this.clonePlainObject(e,t);if(e instanceof Map)return this.cloneMap(e,t);if(e instanceof Set)return this.cloneSet(e,t);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return RegExp(e.source,e.flags)}throw new TypeError(`Can't clone non-object, null or undefined."`)},cloneArray(e,t=!1){if(t){const n=[];for(let s,r=0;r<e.length;r++)s=e[r],n.push("object"==typeof s&&null!==s?this.clone(s,t):s);return n}return e.slice()},clonePlainObject(e,i=!1){if(i){const t={};let n,s;for(n in e)s=e[n],t[n]="object"==typeof s&&null!==s?this.clone(s,i):s;return t}return t.assign({},e)},cloneMap(e,t=!1){const i=new Map;return t?e.forEach((e,n)=>i.set("object"==typeof n?this.clone(n,t):n,"object"==typeof e&&null!==e?this.clone(e,t):e)):e.forEach((e,t)=>i.set(t,e)),i},cloneSet(e,t=!1){const i=new Set;return e.forEach(e=>i.add(t&&"object"==typeof e&&null!==e?this.clone(e,t):e)),i}})},!0),we.Plugin("cue-fn",e=>e.core.Function={throttle(e,t=250,i=null){let n=0,s=0;return function(...r){n=Date.now(),n>s+t&&(e.apply(i,r),s=n)}},defer(e,t=250,i=null){let n=null;return function(...s){clearTimeout(n),n=setTimeout(()=>{e.apply(i,s),n=null},t)}},createTaskWorker(e){const t="function"==typeof e?e:e.process?e.process:void 0,i=new Worker(window.URL.createObjectURL(new Blob([`(function() { onmessage = ${t.toString()} })()`],{type:"application/javascript"})));return e.response&&(i.onmessage=e.response),e.onError&&(i.onerror=e.onError),{process:i.postMessage.bind(i),terminate:i.terminate.bind(i),set response(e){i.onmessage=e},get response(){return i.onmessage},set onError(e){i.onerror=e},get onError(){return i.onerror}}}},!0)})(window||this);