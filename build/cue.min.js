(function(e){var h=Math.PI,f=Math.floor,E=Math.abs,P=Math.min,R=Math.max;function t(e,r){if(A(r)){for(let n,a,s=0;s<r.length;s++)if(n=r[s]){if(n===e||n[ce]===e)return{parent:r,ownPropertyName:s};if("object"==typeof n&&(a=t(e,n)))return a}}else{let n,a,i;for(n in r)if(a=r[n]){if(a===e||a[ce]===e)return{parent:r,ownPropertyName:n};if("object"==typeof a&&(i=t(e,a)))return i}}}function r(e,t){t===K?(n(e),a(e)):t===Z&&s(e)}function n(e){if(e.superDerivatives.length)for(let t,r=0;r<e.superDerivatives.length;r++)t=e.superDerivatives[r],t.stopPropagation=!1,t.superDerivatives.length&&n(t)}function a(e,t=!0){if(e.stopPropagation=t,e.derivatives.length)for(let t,r=0;r<e.derivatives.length;r++)t=e.derivatives[r],t.observers.length&&(e.stopPropagation=!1,a(t))}function s(e,t=!1){e.stopPropagation=t;for(let r,n=0;n<e.superDerivatives.length;n++)r=e.superDerivatives[n],r.observers.length?r.stopPropagation=!0:s(r)}function o(e,t,r,n,a,s,d){let p,u,c;if(a)for(p=0;p<a.length;p++)c=a[p],-1===ge.indexOf(c)&&ge.push(c,new fe(e,t,r,n));if(s&&(u=s.length)&&!1===d){for(p=0;p<u;p++)s[p].updateProperty(t,r);let e;for(p=0;p<u;p++)c=s[p],e=c.value,c.hasChanged&&o("change",c.ownPropertyName,e,void 0,c.observers,c.derivatives,c.stopPropagation)}}function d(e,t,r,n,a,s,o){let d,l;if(a)for(d=0;d<a.length;d++)l=a[d],-1===ge.indexOf(l)&&ge.push(l,new fe(e,t,r,n));if(s&&!1===o)for(d=0;d<s.length;d++)s[d].updateProperty(t,r)}function l(){G=!0;const e=ge.length;for(let t=0;t<e;t+=3)ge[t].react(ge[t+1],ge[t+2]);ge.splice(0,e),G=!1}function p(e,t){let r,n,a,i,s,o,d,l;for(r in e){for(a in o=`${r}-${be()}`,d=Te.insertRule(`.${o} {}`,Te.cssRules.length),l=Te.cssRules[d].style,n=e[r],n)(":"===a[0]||" "===a[0])&&(i=Te.insertRule(`.${o}${a} {}`,Te.cssRules.length),s=Te.cssRules[i].style,Object.assign(s,n[a]),delete n[a]);Object.assign(l,n),e[r]=o,t&&u(r,o,t)}return e}function u(e,t,r){r.classList.replace(e,t);for(let n=0;n<r.children.length;n++)u(e,t,r.children[n])}function c(e){let t,r,n,a,i,s,o,d;for(t in e){for(s in r=`${t}-${be()}`,n=Te.insertRule(`@keyframes ${r} {}`,Te.cssRules.length),a=Te.cssRules[n],i=e[t],i)a.appendRule(`${s}% {}`),o=a.cssRules.length-1,d=a.cssRules[o].style,Object.assign(d,i[s]);e[t]=r}return e}function _(e,t,r,n,s){let o,d,l,p=0,u=0,c=!0,_=t.length-1,g=r.length-1,m=parent.firstChild,h=m,f=parent.lastChild,E=f;outer:for(;c;){c=!1;let e;for(o=t[p],d=r[u];o===d;){if(s(m,d),p++,u++,h=m=m.nextSibling,_<p||g<u)break outer;o=t[p],d=r[u]}for(o=t[_],d=r[g];o===d;){if(s(f,d),_--,g--,l=f,E=f=f.previousSibling,_<p||g<u)break outer;o=t[_],d=r[g]}for(o=t[_],d=r[u];o===d;){if(c=!0,s(f,d),e=f.previousSibling,parent.insertBefore(f,h),E=f=e,u++,_--,_<p||g<u)break outer;o=t[_],d=r[u]}for(o=t[p],d=r[g];o===d;){if(c=!0,s(m,d),e=m.nextSibling,parent.insertBefore(m,l),l=E=m,m=e,p++,g--,_<p||g<u)break outer;o=t[p],d=r[g]}}if(g<u){if(p<=_)for(let e;p<=_;)0===_?parent.removeChild(f):(e=f.previousSibling,parent.removeChild(f),f=e),_--;return}if(_<p){if(u<=g)for(;u<=g;)l?parent.insertBefore(n(r[u]),l):parent.appendChild(n(r[u])),u++;return}const P=Array(g+1-u),R=new Map;let y;for(y=u;y<=g;y++)P[y]=-1,R.set(r[y],y);let O=0,S=[];for(y=p;y<=_;y++)R.has(t[y])?(P[R.get(t[y])]=y,O++):S.push(y);if(0==O){for(parent.textContent="",y=u;y<=g;y++)parent.appendChild(n(r[y]));return}const C=v(P,u),T=[];let I=m;for(y=p;y<=_;y++)T[y]=I,I=I.nextSibling;for(y=0;y<S.length;y++)parent.removeChild(T[S[y]]);let D,A=C.length-1;for(y=g;y>=u;y--)C[A]===y?(l=T[P[C[A]]],s(l,r[y]),A--):(-1===P[y]?D=n(r[y]):(D=T[P[y]],s(D,r[y])),parent.insertBefore(D,l),l=D)}function v(e,t){const r=[],a=[],s=Array(e.length);let o,d,p,u=-1;for(o=t;o<e.length;o++){if(d=e[o],0>d)continue;let t,n=-1,i=r.length;if(0<i&&r[i-1]<=d)p=i-1;else{for(;1<i-n;)t=L((n+i)/2),r[t]>d?i=t:n=t;p=n}-1!==p&&(s[o]=a[p]),p===u?(u++,r[u]=d,a[u]=o):d<r[p+1]&&(r[p+1]=d,a[p+1]=o)}for(o=a[u];0<=u;o=s[o],u--)r[u]=o;return r}function g(e){const t=e(Oe);if(!t||t.constructor!==Object)throw new TypeError(`Can't create Component Module because the configuration function does not return a plain object.`);if(!t.template||!t.template.element)throw new TypeError(`Component Module requires "template" object that specifies an "element" like: "template.element === DOMString || DOMNode || DOMSelector".`);const r=m(t.template.element);return t.template.styles&&(t.styles=p(t.template.styles,r)),t.template.keyframes&&(t.keyframes=c(t.template.keyframes)),t.template.components&&(t.components=t.template.components),t.template=r,t.didMount||(t.didMount=O),t.didUpdate||(t.didUpdate=O),t.willUnmount||(t.willUnmount=O),t}function m(e){if("string"==typeof e)switch(e=e.trim(),e[0]){case"<":return document.createRange().createContextualFragment(e).firstChild;case".":return document.getElementsByClassName(e.substring(1))[0];case"#":return document.getElementById(e.substring(1));case"[":return document.querySelectorAll(e)[0];default:return document.createTextNode(e);}else if(e instanceof Element)return e}console.log(`%c🍑 Cue.js - Version ${.8}`,"color: rgb(0, 140, 255)");const y=e.Cue=function(){},O=()=>{},S=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]),C=Object.assign,b=Object.create,T=Object.defineProperty,I=Object.defineProperties,D=Object.keys,A=Array.isArray,w=Math.random,V=Math.pow,N=Math.round,L=f,B=Reflect.set,x=Reflect.get,U=Reflect.apply,k=Reflect.deleteProperty,j=y.prototype=b(null);C(j,{clamp(e,t,r){return R(e,P(t,r))},lerp(e,t,r){return(1-r)*e+r*t},smoothStep(e,t,r){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))},interpolateLinear(e,t,r,n,a){return r+(a-e)*(n-r)/(t-e)},createLinearInterpolator(e,t,r,n){return arguments.length?0===e&&0<r?e=>e*(n-r)/t+r:0===r&&0<e?r=>(r-e)*n/(t-e):0===e&&0===r?e=>e*n/n:this.interpolateLinear:this.interpolateLinear},convertBits(e,t,r){return 32>e?32>t?r*V(2,t)/V(2,e):r/V(2,e):32>t?N(r*V(2,t)):r},randomIntegerBetween(e,t){return L(w()*(t-e+1)+e)},randomFloatBetween(e,t){return w()*(t-e)+e},isOddNumber(e){return 1&e},isEvenNumber(e){return!(1&e)},degreesToRadians(e){return e*(h/180)},radiansToDegrees(e){return e*(180/h)}}),C(j,{createUID(){let e=0;return(this.createUID=function(){let t,r="";for(const n=e.toString(26).split("");t=n.shift();)r+="abcdefghijklmnopqrstuvwxyz"[parseInt(t,26)];return e++,r}).call(this)},camelCase(e){const t=document.createElement("div");return t.setAttribute(`data-${e}`,""),Object.keys(t.dataset)[0]},dashedCase(e){const t=document.createElement("div");return t.dataset[e]="",t.attributes[0].name.substr(5)}}),C(j,{deepClone(e){if(A(e)){const t=[];for(let r,n=0;n<e.length;n++)r=e[n],t[n]="object"==typeof r?this.deepClone(r):r[n];return t}if(e.constructor===Object){const t={};let r,n;for(r in e)n=e[r],t[r]="object"==typeof n?this.deepClone(n):n[r];return t}},shallowClone(e){return A(e)?e.slice():e.constructor===Object?Object.assign({},e):void 0},deepCompare(e,t){if(e===t)return!0;else{const n=typeof e;if(n==typeof t){const a=Array.isArray(t);if(Array.isArray(e)&&a){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!this.deepCompare(e[r],t[r]))return!1;return!0}if("object"==n&&!a){for(var r in e)if(!this.deepCompare(e[r],t[r]))return!1;return!0}return!1}return!1}},shallowCompare(e,t){if(e.constructor===Object&&t.constructor===Object){const r=D(e),n=D(t);if(r.length!==n.length)return!1;for(let a,s=0;s<r.length;s++)if(a=r[s],-1===n.indexOf(a)||e[a]!==t[a])return!1;return!0}if(A(e)&&A(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t},mergeObjects(...e){for(let t=0,r=e.length,n="";++t<r;)for(n in e[t])e[t].hasOwnProperty(n)&&(e[0][n]=e[t][n]);return e[0]}}),C(j,{flattenArray(e){return e.reduce((e,t)=>e.concat(Array.isArray(t)?this.flattenArray(t):t),[])},insertAtEvery(e,t,r){r=R(r,1);const n=e.length,a=f(n+n/r),i=f(a/r);let s=[];for(let o=0;o<i;o++)if(s.length+r<a){for(let t=0;t<r;t++)s.push(e[t+o*r]);s.push(t)}else{const t=R(a-s.length,0);s=s.concat(e.slice(n-t,n+1));break}return e=s,this},removeAtEvery(e,t){for(let r=f(e.length/t);r--;)e.splice((r+1)*t-1,1);return this},removeRangeFromArray(e,t,r){return e.splice(t,r-t),this},mergeArrays(e,t,r=e.length){r=P(R(r,0),e.length);const n=t.length,a=e.length-r,s=Array(a);let o;for(o=0;o<a;o++)s[o]=e[o+r];for(o=0;o<n;o++)e[o+r]=t[o];for(o=0;o<a;o++)e[o+n+r]=s[o];return this},scaleArray(e,t){var r=Math.ceil;const n=e.length-1,s=t-1;let o=0,l=0,p=0,u=0;for(let a=1;a<s;a++)o=a*(n/s),l=f(o),p=r(o),u=o-l,e[a]=e[l]+(e[p]-e[l])*u;return e[s]=e[n],this},closestValueInArray(e,t){return e.reduce((e,r)=>E(r-t)<E(e-t)?r:e)},closestSmallestValueInArray(e,t){const r=this.closestValueInArray(e,t);return t>=r?r:e[e.indexOf(r)-1]},closestLargestValueInArray(e,t){const r=this.closestValueInArray(e,t);return t<=r?r:e[e.indexOf(r)+1]},largestValueInArray(e){let t=-Infinity;for(let r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return t===-Infinity?void 0:t},smallestValueInArray(e){let t=1/0;for(let r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return t===1/0?void 0:t}}),C(j,{throttle(e,t=250,r=null){let n=0,a=0;return function(...i){n=Date.now(),n>a+t&&(e.apply(r,i),a=n)}},defer(e,t=250,r=null){let n=null;return function(...a){clearTimeout(n),n=setTimeout(()=>{e.apply(r,a),n=null},t)}},createTaskWorker(e){const t="function"==typeof e?e:e.process?e.process:void 0,r=new Worker(window.URL.createObjectURL(new Blob([`(function() { onmessage = ${t.toString()} })()`],{type:"application/javascript"})));return e.response&&(r.onmessage=e.response),e.onError&&(r.onerror=e.onError),{process:r.postMessage.bind(r),terminate:r.terminate.bind(r),set response(e){r.onmessage=e},get response(){return r.onmessage},set onError(e){r.onerror=e},get onError(){return r.onerror}}}});const M=new Map,z=e=>"string"==typeof e&&2<e.length&&-1!==e.indexOf("-"),Y=e=>e.split("-"),X=(e,t)=>e.didInstall?(console.warn(`"${e.name}" has already been installed. Installation ignored.`),e.interface):(e.installer.call(e.interface,j,t),e.didInstall=!0,e.interface.onDidInstall(),e.interface);I(y,{Plugin:{value:function(e,t,r){if(!z(e))throw new Error(`Plugin must be defined with a namespaced-name (vendor-plugin) of type string as the first argument.`);const[n,a]=Y(e);if(!t&&!r){const e=M.get(n);if(e){const t=e.get(a);if(t)return t}}else{if("function"!=typeof t)throw new Error(`Plugin must be defined with an installable function as the second argument.`);const i=M.get(n)||M.set(n,new Map).get(n);if(i.has(a))return console.warn(`A plugin with name "${a}" has already been registered under "${n}". Skipping installation...`),i.get(a).interface;const s={installer:t,didInstall:!1,name:e,interface:{name:e,onDidInstall(){}}};return i.set(a,s),r?X(s):s.interface}}},use:{value:function(e,t){if(!z(e))throw new Error(`pluginName must be a namespaced-string (vendor-plugin).`);const[r,n]=Y(e),a=M.get(r);if(a){const e=a.get(n);if(e)return X(e,t)}throw new Error(`No Plugin registered under "${e}".`)}}});const F=new Map;let G=!1,q=!1,W=null;const J=j.shallowClone,H=j.shallowCompare,K=-1,Z=1,$=Symbol("UniqueID"),Q=Symbol("IsValueObservable"),ee=Symbol("IsValueDerived"),te=Symbol("ReactorTarget"),re=Symbol("DisposeReactor"),ne=Symbol("Reactors"),ae=Symbol("ObserversOfProperties"),ie=Symbol("DerivativesOfProperties"),se=Symbol("DerivedProperties"),oe=Symbol("ParentModel"),de=Symbol("OwnPropertyName"),le=Symbol("SetParent"),pe=Symbol("GetOwnCue"),ue=Symbol("SetParentCue"),ce=Symbol("SourceData"),_e=Symbol("ProxyModel"),ve={ROOT:void 0},ge=[],me=b(j,{import:{value:function(e){const t=F.get(e);if(!t)throw new ReferenceError(`Can't import State Module because nothing is registered under "${e}".`);return t}}});class he{static create(e,t,r){return e[Q]?e:e[_e]||new this(e,t,r)}constructor(e,r,n){const a=this.uid=Symbol(),i=this.reactors=new Set,s=this.observersOf=new Map,l=this.derivativesOf=new Map,p=this.derivedProperties=new Map;if(this.fnCache=new Map,this.valueCache=new Map,r)this.parent=r,this.ownPropertyName=n;else{const{parent:r,ownPropertyName:n}=t(e,ve);this.parent=r,this.ownPropertyName=n}this.attemptCue=(e,t,r,n)=>{const a=this.derivativesOf.get(t),i=this.observersOf.get(t);return!!(a||i)&&(q?d(e,t,r,n,i,a,!1):o(e,t,r,n,i,a,!1),!0)},this.attemptCueParent=this.parent[pe],this.metaProperties=new Map([[Q,!0],[ce,e],[oe,this.parent],[ae,s],[ie,l],[se,p],[de,this.ownPropertyName],[ne,i],[pe,this.attemptCue],[ue,e=>this.attemptCueParent=e],[le,e=>this.parent=e],[$,a]]),this.data=e,this.model=new Proxy(e,this),this.setupDerivatives();let u,c;for(u in e)(c=e[u])&&c[Q]&&(c[le](this.model),c[ue](this.attemptCue));return Object.defineProperty(e,_e,{value:this.model,configurable:!0}),(this.parent[ce]||this.parent)[this.ownPropertyName]=this.model,this.model}get(e,t){if(null!==W){const r=x(e,t);"object"!=typeof r||null===r||r[Q]||r[ee]||this.constructor.create(r,e,t),this.derivativesOf.has(t)?this.derivativesOf.get(t).push(W):this.derivativesOf.set(t,[W]),-1===W.dependencies.indexOf(t)&&W.dependencies.push(t);const n=this.derivedProperties.get(t);return void(n&&(-1===n.derivatives.indexOf(W)&&n.derivatives.push(W),-1===W.superDerivatives.indexOf(n)&&W.superDerivatives.push(n)))}const r=this.metaProperties.get(t);if(r)return r;const n=x(e,t);return"function"==typeof n?this.fnCache.get(t)||this.fnCache.set(t,(...r)=>{if(!S.has(t)||!this.attemptCueParent)return U(n,e,r);const a=J(e),i=U(n,e,r);return H(a,e)||!this.attemptCueParent("methodCall",this.ownPropertyName,e,{method:t,arguments:r,result:i})||q||l(),i}).get(t):n}set(e,t,r){if(this.derivedProperties.has(t))throw new Error(`Can not set property "${t}" because it is derived. Derivatives have to be explicitly deleted before they can be redefined.`);if(!G&&r!==this.valueCache.get(t)){if("function"==typeof r){const e=this.addDerivative(t);e.connect(),e.refreshCache(),r=e.value}else B(e,t,r),this.valueCache.set(t,r?r[ce]||r:r);if(this.attemptCue("set",t,r,void 0))return"object"!=typeof r||null===r||r[Q]||r[ee]||this.constructor.create(r,e,t),this.attemptCueParent&&this.attemptCueParent("setChild",this.ownPropertyName,e,{childProperty:t,mutationType:"set"}),q||l(),!0;if(this.attemptCueParent&&this.attemptCueParent("setChild",this.ownPropertyName,e,{childProperty:t,mutationType:"set"}))return q||l(),!0}}deleteProperty(e,t){if(!G)return this.derivedProperties.has(t)&&this.derivedProperties.get(t).dispose(!0),k(e,t),this.valueCache.delete(t),this.attemptCue("delete",t,void 0,void 0),this.attemptCueParent&&this.attemptCueParent("deleteChild",this.ownPropertyName,e,{childProperty:t,mutationType:"delete"}),q||l(),!0}setupDerivatives(){const e=Object.keys(this.data),t=e.length;let r,n,a;for(r=0;r<e.length;r++)a=e[r],this.data.hasOwnProperty(a)&&"function"==typeof this.data[a]&&this.addDerivative(a);if(0===this.derivedProperties.size)return!1;this.derivedProperties.forEach(e=>e.connect());let s,o,d;const l=[];search:for(;l.length<t;)for(r=0;r<t;r++){if(a=e[r],o=this.derivedProperties.get(a),o&&!1===o.readyToInstall){for(n=0;n<o.dependencies.length;n++)if(s=o.dependencies[n],d=this.derivedProperties.get(s),d&&!1===d.readyToInstall){o.readyToInstall=!1;break}else o.readyToInstall=!0;o.readyToInstall&&(o.refreshCache(this.data),l.push(a))}else-1===l.indexOf(a)&&l.push(a);if(l.length===t)break search}return!0}addDerivative(e){const t=new Pe(this.model,e,this.data[e]);return this.derivedProperties.set(e,t),Object.defineProperty(this.data,e,{get(){return t.value},configurable:!0,enumerable:!1}),t}dispose(){let e,t,r;for(e in this.data)(t=this.data[e])&&t[Q]&&(t[le](this.data),t[ue](void 0)),(r=this.derivedProperties.get(e))&&Object.defineProperty(this.data,e,{value:r.computation,writable:!0,configurable:!0,enumerable:!0});return(this.parent[ce]||this.parent)[this.ownPropertyName]=this.data,delete this.data[_e],this.attemptCueParent=void 0,this.model=void 0,this.data=void 0,this.reactors.clear(),this.observersOf.clear(),this.derivativesOf.clear(),this.derivedProperties.clear(),this.fnCache.clear(),this.valueCache.clear(),this.metaProperties.clear(),!0}}class fe{constructor(e,t,r,n){this.type=e,this.property=t,this.value=r,this.mutationDetails=n}}class Ee{constructor(e,t){this.reactor=e,this.reactionTarget=e.target,this.reaction=t}react(e){this.reaction.call(this.reactionTarget,e)}}class Pe{constructor(e,t,r){this[ee]=!0,this.parent=e,this.ownPropertyName=t,this.computation=r,this.dependencies=[],this.derivatives=[],this.superDerivatives=[],this.dependencyValues=Object.create(null),this.observers=[],this.stopPropagation=!1,this.intermediate=void 0,this._value=void 0,this.readyToInstall=!1,this.needsUpdate=!1,this.hasChanged=!1}get value(){return this.needsUpdate&&(this.intermediate=this.computation.call(null,this.dependencyValues),this._value&&"object"==typeof this._value&&this.intermediate&&"object"==typeof this.intermediate?H(this._value,this.intermediate)?this.hasChanged=!1:(this._value=this.intermediate,this.hasChanged=!0):this.intermediate===this._value?this.hasChanged=!1:(this._value=this.intermediate,this.hasChanged=!0),this.needsUpdate=!1),this._value}updateProperty(e,t){this.dependencyValues[e]=t,this.needsUpdate=!0}connect(){W=this;try{this.computation.call(this.parent,this.parent)}catch(t){}W=null}refreshCache(e){for(let t,r=0;r<this.dependencies.length;r++)t=this.dependencies[r],this.dependencyValues[t]=e[t];this.needsUpdate=!0}dispose(e=!0){let t;for(this.parent[se].delete(this.ownPropertyName),this.parent[ie].forEach((e,r)=>{t=r.indexOf(this),-1<t&&r.splice(t,1)}),this.dependencyValues=void 0,this.observers=void 0,this.intermediate=void 0,this._value=void 0,t=0;t<this.superDerivatives.length;t++)this.superDerivatives[t].derivatives=this.superDerivatives[t].derivatives.filter(e=>e!==this),s(this.superDerivatives[t],!0);for(t=0;t<this.derivatives.length;t++)this.derivatives[t].dispose(!1);if(e)for(t=0;t<this.superDerivatives.length;t++)r(this.superDerivatives[t],K);this.superDerivatives=void 0}}T(y,"State",{value:function(e,t){if(F.has(e))throw new Error(`A State Model has already been registered under name "${e}". Unregister it first or use a unique name.`);F.set(e,function r(...n){return this.instance||T(r,"instance",{value:I({},{type:{value:"model",enumerable:!0},name:{value:e,enumerable:!0},value:{value:void 0,enumerable:!0,writable:!0}})}),this.instance.value||(this.instance.value=t(b(me,{instance:Object.getOwnPropertyDescriptor(this,"instance")}),...n))})}});const Re=new Map,ye=new WeakMap,Oe=b(j,{import:{value:function(e){const t=Re.get(e);if(!t)throw new ReferenceError(`Can't import UI Component because nothing is registered under "${e}".`);return t}}});class Se{constructor(e){if("object"!=typeof e)throw new TypeError(`Can't create Reactor with the provided target because it has to be of type 'object' but is "${typeof e}".`);else if(e[te])throw new TypeError(`Can't create Reactor because the provided target object is already wrapped by another Reactor.`);this.target=e,Object.defineProperties(e,{[te]:{value:!0,configurable:!0},[re]:{value:()=>this.dispose(),configurable:!0}}),this.source=void 0,this.observedProperties=new Set}attachTo(e){if(this.source)throw new ReferenceError(`Observer already has a source. Detach from the existing source before attaching to a new one.`);if("object"!=typeof e)throw new TypeError(`Can't observe source because it has to be of type 'object' but is "${typeof e}".`);return this.source=e[_e]||e,this}detach(){if(!this.source)throw new ReferenceError(`Can't clear non-existing source.`);return this.source[Q]&&this.observedProperties.size&&this.unobserveProperties(),this.source=void 0,this}dispose(){this.unobserveProperties(),delete this.target[te],delete this.target[re],this.source=void 0,this.target=void 0,this.observedProperties=void 0}observeProperty(e,t,n){if(!this.source)throw new ReferenceError(`Can't observe because no observation source has been assigned to observer!`);if("function"!=typeof t)throw new TypeError(`Can't observe property "${e}" because the provided handler is of type "${typeof t}".`);this.source[Q]||(this.source=he.create(this.source,this.sourceParent,this.sourceOwnPropertyName));const a=this.source[e];let i=a;const s=this.source[se].get(e),o=this.source[ae],d=new Ee(this,t);return this.source[ne].add(this),this.observedProperties.add(e),"object"==typeof a&&null!==a&&(a[Q]?i=a[ce]:a[_e]?this.source[e]=a[_e]:!s&&he.create(a,this.source,e)),s&&(s.observers.push(d),r(s,K)),o.has(e)?o.get(e).push(d):o.set(e,[d]),!0===n&&d.react(new fe("set",e,i,void 0)),this}observeProperties(e,t){if(!this.source)throw new ReferenceError(`Can't observe because no observation source has been assigned to observer!`);if("object"!=typeof e)throw new TypeError(`Can't observe properties because the propHandler is not a pojo of type {property: function}`);this.source[Q]||(this.source=he.create(this.source)),this.source[ne].add(this);const n=this.source[ae],a=this.source[se];let i,s,o,d,l;for(i in e){if("function"!=typeof e[i])throw new TypeError(`Reaction for "${i}" has to be a function but is of type "${typeof e[i]}".`);o=this.source[i],d=o,l=a.get(i),s=new Ee(this,e[i]),this.observedProperties.add(i),"object"==typeof o&&null!==o&&(o[Q]?d=o[ce]:o[_e]?this.source[i]=o[_e]:!l&&he.create(o,this.source,i)),l&&(l.observers.push(s),r(l,K)),n.has(i)?n.get(i).push(s):n.set(i,[s]),!0===t&&s.react(new fe("set",i,d,void 0))}return this}unobserveProperty(e){if(!this.observedProperties.has(e))throw new ReferenceError(`Can't unobserve property "${e}" because it is not being observed.`);else this.observedProperties.delete(e);const t=this.source[se].get(e);t&&(t.observers.splice(0,t.observers.length),r(t,Z));const n=this.source[ae],a=n.get(e);if(a){const t=a.filter(e=>e.reactor!==this);0===t.length?n.delete(e):n.set(e,t)}0===this.observedProperties.size&&this.source[ne].delete(this),0===n.size&&(this.source.dispose(),this.source=void 0,this.sourceParent=void 0,this.sourceOwnPropertyName=void 0)}unobserveProperties(e){const t=this.source[ne],n=this.source[ae],a=this.source[se];let i,s;e||(e=this.observedProperties),e.forEach(e=>{if(!this.observedProperties.has(e))throw new ReferenceError(`Can't unobserve property "${e}" because it is not being observed.`);else this.observedProperties.delete(e);i=a.get(e),i&&(i.observers.splice(0,i.observers.length),r(i,Z)),s=n.get(e),s&&(s=s.filter(e=>e.reactor!==this),0===s.length?n.delete(e):n.set(e,s))}),0===this.observedProperties.size&&t.delete(this),0===n.size&&(this.source.dispose(),this.source=void 0,this.sourceParent=void 0,this.sourceOwnPropertyName=void 0)}}class Ce{constructor(e,t){if(!e)throw new TypeError(`Can't create MappedClassList. First argument has to be a plain Object or a Map but is ${JSON.stringify(e)}.`);else e.constructor===Object?e=new Map(Object.entries(e)):Array.isArray(e)&&(e=new Map(e));Object.defineProperties(this,{__map__:{value:e},__org__:{value:t.classList}})}item(e){return this.__org__.item(e)}contains(e){return this.__org__.contains(this.__map__.get(e)||e)}add(e){this.__org__.add(this.__map__.get(e)||e)}remove(e){this.__org__.remove(this.__map__.get(e)||e)}replace(e,t){this.__org__.replace(this.__map__.get(e)||e,this.__map__.get(t)||t)}toggle(e){this.__org__.toggle(this.__map__.get(e)||e)}}const{createUID:be}=j,Te=(()=>{const e=document.createElement("style");return e.id="CUE-STYLES",document.head.appendChild(e),e.sheet})();class Ie{constructor(e,t,r,n){this.element=e,this.components=t,this.keyframes=n,this.styles=r,this.classList=r&&Object.keys(r).length?new Ce(r,e):this.element.classList}getRefs(){const e=this.element.querySelectorAll("[ref]");if(e.length){const t={};for(let n,r=0;r<e.length;r++)n=e[r],t[n.getAttribute("ref")]=n;return t}}getIndex(){const e=this.element.parentNode.children;for(let t=0;t<e.length;t++)if(e[t]===this.element)return t;return-1}getSiblings(e=!1){if(e)return Array.from(this.element.parentNode.children);else{const e=[],t=this.element.parentNode.children;for(let r=0;r<t.length;r++)t[r]!==this.element&&e.push(t[r]);return e}}getBoundingBox(){const e=this.element.cloneNode(!0);e.style.position="absolute",e.style.left="-100000px",e.style.top="-100000px",e.style.display="block",this.element.parentElement.appendChild(e);const t=e.getBoundingClientRect();return e.parentElement.removeChild(e),t}setChildren({from:r=[],to:e,create:t,update:n=O}){if(0===e.length)return void(this.element.textContent="");if(0===r.length){for(let r=0;r<e.length;r++)parent.appendChild(t(e[r]));return}_(this.element,r,e,t,n)}observe(e,t,r,n){const a=ye.get(this.element)||ye.set(this.element,new Se(this.element).attachTo(e)).get(this.element);"object"==typeof t&&t?a.observeProperties(t,"boolean"!=typeof r||r):a.observeProperty(t,r,n||!0)}unobserve(e){const t=ye.get(this.element);if(t)"object"==typeof e&&e?t.unobserveProperties(e):t.unobserveProperty(e);else throw new ReferenceError(`Can't unobserve because element is not observing any state.`)}on(e,t,r){if(1===arguments.length&&e&&e.constructor===Object)for(const t in e)this.element.addEventListener(t,e[t]);else if("function"==typeof t)this.element.addEventListener(e,t,r||{});else throw new TypeError(`Can't bind event listener(s) because of invalid arguments.`)}once(e,t,r){if(1===arguments.length&&e&&e.constructor===Object){for(const t in e)this.element.addEventListener(t,e[t],r?Object.assign(r,{once:!0}):{once:!0});return e}if("function"==typeof t)return this.element.addEventListener(e,t,r?Object.assign(r,{once:!0}):{once:!0}),t;throw new TypeError(`Can't bind event listener(s) because of invalid arguments.`)}off(e,t){if(1===arguments.length&&e&&e.constructor===Object)for(const t in e)this.element.removeEventListener(t,e[t]);else if("function"==typeof t)this.element.removeEventListener(e,t);else throw new TypeError(`Can't remove event listener(s) because of invalid arguments.`)}}T(y,"Component",{value:function(e,t){if("string"!=typeof e)throw new TypeError(`Can't create Cue-Component. First argument must be name of type string but is of type "${typeof e}".`);else if("function"!=typeof t)throw new TypeError(`Can't create Cue-Component. Second argument must be module of type function but is of type "${typeof t}".`);else if(Re.has(e))throw new Error(`A UI Component has already been registered under name "${e}". Unregister, use a unique name or consider namespacing.with.dots-or-hyphens...`);let r=null;Re.set(e,function(e){r||(r=g(t));const n=r.template.cloneNode(!0);return r.initialize&&r.initialize.call(new Ie(n,r.components,r.styles,r.keyframes),e),n})}});let i=document.body,De=null;const Ae=b(j,{RootState:{get(){return ve.ROOT},set(e){ve.ROOT=he.create(e,ve,"ROOT")}},RootComponent:{get(){return De},set(e){De=e}},RootComponentParent:{get(){return i},set(e){if(!e||!(e instanceof Element||e.nodeName))throw new TypeError(`RootComponentParent must be a DOM Element but is of type ${typeof e}`);i=e}},import:{value:function(e,t){if("state"===e)return me.import(t);if("component"===e)return Oe.import(t);throw new ReferenceError(`Can't import "${t}" from "${e}" modules because no such component has been registered.`)}},start:{value:function(){if(!this.RootState)throw new Error(`Application can't start because no RootState has been defined.`);if(!this.RootComponent)throw new Error(`Application can't start because no RootComponent has been defined.`);const e="function"==typeof this.RootState?this.RootState():this.RootState;i.appendChild(this.RootComponent(e))}}});let we=!1;T(y,"App",{value:function(e){if(we)throw new Error(`An App has already been registered. You can only run a single Cue App per context.`);we=!0,e(Ae)}})})(window||this);