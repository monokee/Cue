(function(e){var H=Math.min,K=Math.max;function t(e,t=0,n=this.length){if(0===arguments.length||0===this.length||t===n)return this;xe++;let r=0;const i=this[ee],s=i.plainState;"object"==typeof e&&null!==e&&(e=e[ee]||N(e,i.module,ke,null));for(let a,o,l=t;l<n;l++)a=s[l],a!==e&&(s[l]=e,e&&(o=e[ee])&&!1===o.mounted&&(xe++,r++,o.instanceDidMount(s,l),B(o)));return i.propertyDidChange(),xe-=r,T(),this}function n(...e){if(0<e.length){const t=this[ee],n=t.plainState;xe++;let r=0;for(let s,a,o=0;o<e.length;o++)s=e[o],"object"==typeof s&&null!==s?(xe++,r++,a=s[ee]||N(s,t.module,ke,null),n.push(a.proxyState),a.instanceDidMount(n,n.length-1),B(a)):n.push(s);t.propertyDidChange(),xe-=r,T()}return this.length}function r(...e){if(0<e.length){const t=this[ee],n=t.plainState;xe++;let r,s,a=0,o=e.length;for(;0<=--o;)r=e[o],"object"==typeof r&&null!==r?(s=r[ee]||N(r,t.module,ke,null),!1===s.mounted&&(xe++,a++,n.unshift(s.proxyState),s.instanceDidMount(n,0),B(s))):n.unshift(r);t.propertyDidChange(),xe-=a,T()}return this.length}function i(e,t,...n){const r=this[ee],s=r.plainState,a=s.length,o=0>e?K(a+e,0):H(e,a);let l,d;1===arguments.length?(l=0,d=a-o):(l=n.length,d=H(K(t,0),a-o));const u=[];xe++;let p=0;if(0<d)for(let e,t,n=o+d;--n>=o;)e=s[n],e&&(t=e[ee])&&t.instanceWillUnmount(),s.splice(n,1),u.push(e);if(0<l)for(let e,t,a,d=0;d<l;d++)e=n[d],t=o+d,"object"==typeof e&&null!==e?(a=e[ee]||N(e,r.module,ke,null),!1===a.mounted&&(xe++,p++,s.splice(t,0,a.proxyState),a.instanceDidMount(s,t),B(a))):s.splice(t,0,e);return xe-=p,r.propertyDidChange(),T(),u}function s(){const e=this[ee],t=e.plainState;if(0===t.length)return;xe++;const n=t[t.length-1],r=n?n[ee]:void 0;return r&&r.instanceWillUnmount(),delete t[t.length-1],e.propertyDidChange(),T(),n}function a(){const e=this[ee],t=e.plainState;if(0===t.length)return;xe++;const n=t[0],r=n?n[ee]:void 0;return r&&r.instanceWillUnmount(),t.shift(),e.propertyDidChange(),T(),n}function o(e,t=0,n=this.length){const r=this[ee],i=r.plainState,s=i.length;let a=0>e?K(s+e,0):H(e,s),o=0>t?K(s+t,0):H(t,s);const l=0>n?K(s+n,0):H(n,s);let d,u=H(l-o,s-a);o<a&&a<o+u?(d=-1,o=o+u-1,a=a+u-1):d=1,xe++;for(let r,s;0<u;){if(o in i){if(r=i[o],r&&r[ee])throw new Error(`You can't create copies of Cue State Instances via Array.prototype.copyWithin.`);i[a]=i[o]}else r=i[a],r&&(s=r[ee])&&s.instanceWillUnmount(),delete i[a];o+=d,a+=d,u-=1}return r.propertyDidChange(),T(),i}function l(){const e=this[ee],t=e.plainState;return xe++,t.reverse(),e.propertyDidChange(),T(),t}function d(e){const t=this[ee],n=t.plainState;return xe++,n.sort(e),t.propertyDidChange(),T(),n}function u(e){const t={},n=ue(e);for(let r,s,a=0;a<n.length;a++)r=n[a],s=e[r],t[r]=s?pe(s)?p(s):"object"==typeof s?u(s):s:s;return t}function p(e){const t=[];for(let n,r=0;r<e.length;r++)n=e[r],t[r]=n?pe(n)?p(n):"object"==typeof n?u(n):n:n;return t}function c(e,t){return pe(e)?!!(pe(t)&&e.length===t.length)&&g(e,t):"object"==typeof e?"object"==typeof t&&(null!==e&&null!==t||e===t)&&h(e,t):e===t}function g(e,t){for(let n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1;return!0}function h(e,t){const n=ue(e),r=ue(t);if(n.length!==r.length)return!1;for(let s,a=0;a<n.length;a++)if(s=n[a],-1===r.indexOf(s)||!c(e[s],t[r[a]]))return!1;return!0}function f(e,t,n,r="id"){const s=e[t];if(n!==s){if(null===s||void 0===s||null===n||"object"!=typeof n)return void(void 0===n?delete e[t]:e[t]=n);if(pe(n)){if(n.length&&s.length&&r&&null!=n[0][r]){let e,t,i,a,o,l,d,u,p=Array(n.length),c=new Map;for(i=0,a=H(s.length,n.length);i<a&&(s[i]===n[i]||r&&s[i][r]===n[i][r]);i++)f(s,i,n[i],r);for(a=s.length-1,o=n.length-1;0<=a&&0<=o&&(s[a]===n[o]||r&&s[a][r]===n[o][r]);a--,o--)p[o]=s[a];for(d=Array(o+1),t=o;t>=i;t--)l=n[t],u=r?l[r]:l,e=c.get(u),d[t]=void 0===e?-1:e,c.set(u,t);for(e=i;e<=a;e++)l=s[e],u=r?l[r]:l,t=c.get(u),void 0!==t&&-1!==t&&(p[t]=s[e],t=d[t],c.set(u,t));for(t=i;t<n.length;t++)p.hasOwnProperty(t)?(s[t]!==p[t]&&(void 0===p[t]?delete s[t]:s[t]=p[t]),f(s,t,n[t],r)):s[t]!==n[t]&&(void 0===n[t]?delete s[t]:s[t]=n[t])}else for(let e=0,t=n.length;e<t;e++)f(s,e,n[e],r);s.length>n.length&&(s.length=n.length)}else{const e=Object.keys(n);for(let t=0,i=e.length;t<i;t++)f(s,e[t],n[e[t]],r);const t=Object.keys(s);for(let e=0,r=t.length;e<r;e++)void 0===n[t[e]]&&void 0!==s[t[e]]&&delete s[t[e]]}}}function m(e,t){return pe(e)?!!(pe(t)&&e.length===t.length)&&v(e,t):"object"==typeof e?"object"==typeof t&&(null!==e&&null!==t||e===t)&&_(e,t):e===t}function v(e,t){for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function _(e,t){const n=ue(e),r=ue(t);if(n.length!==r.length)return!1;for(let s,a=0;a<n.length;a++)if(s=n[a],-1===r.indexOf(s)||e[s]!==t[s])return!1;return!0}function y(e=!1){const t=this[ee],n=pe(t.plainState)?p(t.plainState):u(t.plainState);return e?JSON.stringify(n):n}function b(e){const t=this[ee];e.constructor===String&&(e=JSON.parse(e)),f(t.closestModuleParent.proxyState,t.branchPropertyName,e),T()}function P(e){const t=e.sourceInternals.providersOf.get(e.sourceProperty);return t?P(t):e}function C(e,t,n,r){const s={targetModule:e,targetProperty:t,sourceModule:n,sourceProperty:r},a=Se.get(n);if(a.consumersOf.has(r)){const o=a.consumersOf.get(r);let l=!1,d=-1;for(;++d<o.length&&!1==l;)o[d].targetModule===e&&o[d].targetProperty===t&&o[d].sourceModule===n&&o[d].sourceProperty===r&&(l=!0);!1==l&&a.consumersOf.get(r).push(s)}else a.consumersOf.set(r,[s])}function E(e,t){ie(je,{allProperties:e,computedProperties:t});const n=new Proxy(e,{get:S});let r;for(r of t.values()){je.derivative=r;try{r.computation.call(n,n)}catch(t){}}je.derivative=null,je.allProperties=null,je.computedProperties=null}function S(e,t){const{derivative:n,allProperties:r,computedProperties:i}=je;if(!r.hasOwnProperty(t))throw new Error(`Unable to resolve dependency "${t}" of computed prop "${n.ownPropertyName}".`);if(-1===n.sourceProperties.indexOf(t)&&n.sourceProperties.push(t),i.has(t)){const e=i.get(t);-1===e.subDerivatives.indexOf(n)&&e.subDerivatives.push(n),-1===n.superDerivatives.indexOf(e)&&n.superDerivatives.push(e)}}function O(e,t){t===Ie?(U(e),x(e)):t===we&&D(e)}function U(e){if(e.superDerivatives.length)for(let t,n=0;n<e.superDerivatives.length;n++)t=e.superDerivatives[n],t.stopPropagation=!1,t.superDerivatives.length&&U(t)}function x(e,t=!0){if(e.stopPropagation=t,e.subDerivatives.length)for(let t,n=0;n<e.subDerivatives.length;n++)t=e.subDerivatives[n],t.observers.length&&(e.stopPropagation=!1,x(t))}function D(e,t=!1){e.stopPropagation=t;for(let n,r=0;r<e.superDerivatives.length;r++)n=e.superDerivatives[r],n.observers.length?n.stopPropagation=!0:D(n)}function j(e,t){const n=e[ee];return t===ee?n:"imports"===t?n.imports:n.internalGetters.has(t)?n.internalGetters.get(t)(n):e[t]}function I(e,t,n){const r=e[ee];if(r.internalSetters.has(t))return r.internalSetters.get(t)(r,n),!0;if(n!==r.valueCache.get(t)){if(xe++,"object"==typeof n&&null!==n){const i=n[ee]||N(n,r.module,ke,null);return!1===i.mounted?(e[t]=i.proxyState,i.instanceDidMount(e,t),B(i)):console.warn(`Can't re-mount previously mounted property "${t}" to instance of "${r.module.name}". This feature is not yet available.`),r.propertyDidChange(t,i.proxyState),r.valueCache.set(t,i.proxyState),T(),!0}return e[t]=n,r.propertyDidChange(t,n),r.valueCache.set(t,n),T(),!0}}function w(e,t){if(e.hasOwnProperty(t)){xe++;const n=e[ee],r=e[t],i=r?r[ee]:void 0;return i&&i.instanceWillUnmount(),delete e[t],n.valueCache.delete(t),n.propertyDidChange.call(n,t,void 0),T(),!0}}function T(){if(!1===Ge&&0<De.size&&(cancelAnimationFrame(Re),Re=requestAnimationFrame(M)),0==--xe){for(;Ue.length;)Ue.pop();for(;Oe.length;)Oe.pop()}}function M(){Ge=!0;for(const e of De.entries())e[0](e[1]);Re=null,Ge=!1,De.clear()}function k(e,t){const n=fe(t)?t(be):t;if(!he(n))throw new TypeError(`Can't create State Module "${e.name}" because the config function does not return a plain object.`);if(!he(n.data))throw new TypeError(`State Module requires "data" pojo containing default and optional computed properties.`);for(const r in e.imports=n.imports,e.defaults={},e.initialize=de,e.consumersOf=new Map,e.internalGetters=new Map([["get",()=>y],["set",()=>b]]),e.internalSetters=new Map,e.derivativesToInstall=new Map,e.providersToInstall=new Map,n.data){const t=n.data[r];fe(t)?(e.derivativesToInstall.set(r,{ownPropertyName:r,computation:t,sourceProperties:[],subDerivatives:[],superDerivatives:[]}),e.internalGetters.set(r,e=>e.derivedProperties.get(r).value)):t instanceof ze?(t.targetModule=e.name,t.targetProperty=r,e.providersToInstall.set(r,t),C(e.name,r,t.sourceModule,t.sourceProperty),e.internalGetters.set(r,e=>{const t=e.providersOf.get(r);return t.sourceInternals.plainState[t.sourceProperty]}),!1===t.readOnly&&e.internalSetters.set(r,(e,t)=>{const n=e.providersOf.get(r);n.sourceInternals.proxyState[n.sourceProperty]=t})):e.defaults[r]=t}for(const r in E(n.data,e.derivativesToInstall),e.derivativesToInstall=Le.from(e.derivativesToInstall),n){const t=n[r];if("initialize"==r){if(fe(t))e.initialize=t;else throw new TypeError(`"${r}" is a reserved word for Cue State Modules and must be a function but is of type "${typeof t}"`);}else if(fe(t))if(!e.internalGetters.has(r))e.internalGetters.set(r,()=>t);else throw new Error(`Module method name "${r}" clashes with a property from "props" or with a default Cue property ("get" and "set" are reserved properties). Make sure that props and method names are distinct.`)}return e}function N(e,t,n,r){const i=e[ee]=n===Me?new We(t,n):new Fe(t,n),s=new Proxy(e,{get:j,set:I,deleteProperty:w});return i.plainState=e,i.proxyState=s,r&&(i.initialProps=r),i}function B(e){if(pe(e.plainState))for(let t,n=0;n<e.plainState.length;n++)t=e.plainState[n],"object"==typeof t&&null!==t&&(t=t[ee]||N(t,e.module,ke,null),!1===t.mounted&&(e.plainState[n]=t.proxyState,t.instanceDidMount(e.plainState,n)),B(t));else{const t=ue(e.plainState);for(let n,r,s=0;s<t.length;s++)n=t[s],r=e.plainState[n],"object"==typeof r&&null!==r&&(r=r[ee]||N(r,e.module,ke,null),!1===r.mounted&&(e.plainState[n]=r.proxyState,r.instanceDidMount(e.plainState,n)),B(r))}}function z(e,t){let n=null;const r=e=>N(u(n.defaults),n,Me,e).proxyState;return i=>(n||(n=k(e,t)),r(i))}function q(e,t,n){const r=new Map;if(!e)return r;for(const i in n||(n=`cue-${Ye.cssRules.length.toString(36)}`),e)G(R(i,n,t,r),e[i]);return t.classList.add(n),r.forEach((e,n)=>{A(n,e,t)}),r}function L(e,t,n,r){return e.getElementsByTagName(n).length?`.${t} ${n}`:"#"===n[0]?n:(n=n.replace(".",""),`.${r.set(n,`${t}-${n}`).get(n)}`)}function R(e,t,n,r){if(-1<e.indexOf(",")){const s=e.split(","),a=[];for(let e=0;e<s.length;e++)a.push(L(n,t,s[e],r));return a.join(", ")}return L(n,t,e,r)}function G(e,t){let n,r="";for(n in t)0===n.indexOf("--",0)?(r+=`${n}: ${t[n]}; `,delete t[n]):"content"===n&&(r+=`${n}: "${t[n]}"; `,delete t[n]);const i=Ye.insertRule(`${e} { ${r} } `,Ye.cssRules.length),s=Ye.cssRules[i].style;for(n in t)if(!(t[n].constructor===te))s[n]=t[n];else if(-1<n.indexOf(",")){const r=n.split(",");for(let s=0;s<r.length;s++)"&"===r[s][0]?G(`${e}${r[s].substring(1)}`,t[n]):G(`${e} ${r[s]}`,t[n])}else"&"===n[0]?G(`${e}${n.substring(1)}`,t[n]):G(`${e} ${n}`,t[n])}function A(e,t,n){n.classList.replace(e,t);for(let r=0;r<n.children.length;r++)A(e,t,n.children[r])}function W(e,t){let n,r,i;for(n in e)if(r=e[n],ge(r))for(i in r){let e,n,s=i;"."===i[0]||"#"===i[0]||"["===i[0]||"*"===i[0]||Ve.has(i)||(s="."+i),n=t.has(s)?"."+t.get(s):t.has(e=s.substring(1))?"."+t.get(e):s,n!==i&&(r[n]=r[i],delete r[i])}}function F(e){if("string"==typeof e)switch(e=e.trim(),e[0]){case"<":return document.createRange().createContextualFragment(e).firstChild;case".":return document.getElementsByClassName(e.substring(1))[0];case"#":return document.getElementById(e.substring(1));case"[":return document.querySelectorAll(e)[0];default:throw new TypeError(`Can't create template from string because it's not html markup or a valid selector.`);}else if(e instanceof Element)return e}function X(e,t,n,r,s){let o,l,d,u=0,p=0,c=!0,g=t.length-1,h=n.length-1,f=e.firstChild,m=f,v=e.lastChild,_=v;outer:for(;c;){c=!1;let r;for(o=t[u],l=n[p];o===l;){if(s(f,l),u++,p++,m=f=f.nextSibling,g<u||h<p)break outer;o=t[u],l=n[p]}for(o=t[g],l=n[h];o===l;){if(s(v,l),g--,h--,d=v,_=v=v.previousSibling,g<u||h<p)break outer;o=t[g],l=n[h]}for(o=t[g],l=n[p];o===l;){if(c=!0,s(v,l),r=v.previousSibling,e.insertBefore(v,m),_=v=r,p++,g--,g<u||h<p)break outer;o=t[g],l=n[p]}for(o=t[u],l=n[h];o===l;){if(c=!0,s(f,l),r=f.nextSibling,e.insertBefore(f,d),d=_=f,f=r,u++,h--,g<u||h<p)break outer;o=t[u],l=n[h]}}if(h<p){if(u<=g)for(let t;u<=g;)0===g?e.removeChild(v):(t=v.previousSibling,e.removeChild(v),v=t),g--;return}if(g<u){if(p<=h)for(;p<=h;)d?e.insertBefore(r(n[p]),d):e.appendChild(r(n[p])),p++;return}const y=Array(h+1-p),P=new Map;let C;for(C=p;C<=h;C++)y[C]=-1,P.set(n[C],C);let E=0,S=[];for(C=u;C<=g;C++)P.has(t[C])?(y[P.get(t[C])]=C,E++):S.push(C);if(0==E){for(e.textContent="",C=p;C<=h;C++)e.appendChild(r(n[C]));return}const O=V(y,p),U=[];let x=f;for(C=u;C<=g;C++)U[C]=x,x=x.nextSibling;for(C=0;C<S.length;C++)e.removeChild(U[S[C]]);let D,j=O.length-1;for(C=h;C>=p;C--)O[j]===C?(d=U[y[O[j]]],s(d,n[C]),j--):(-1===y[C]?D=r(n[C]):(D=U[y[C]],s(D,n[C])),e.insertBefore(D,d),d=D)}function V(e,t){var r=Math.floor;const s=[],a=[],o=Array(e.length);let d,u,p,c=-1;for(d=t;d<e.length;d++){if(u=e[d],0>u)continue;let t,n=-1,i=s.length;if(0<i&&s[i-1]<=u)p=i-1;else{for(;1<i-n;)t=r((n+i)/2),s[t]>u?i=t:n=t;p=n}-1!==p&&(o[d]=a[p]),p===c?(c++,s[c]=u,a[c]=d):u<s[p+1]&&(s[p+1]=u,a[p+1]=d)}for(d=a[c];0<=c;d=o[d],c--)s[c]=d;return s}function Y(e,t){const n=e.state[ee];for(var r in t)n.addChangeReaction.call(n,r,t[r],e,e.autorun)}function $(t,n){let r,i;for(r in n)if(i=n[r],t.events.has(r))J(t.events.get(r),i,t);else{const n=[];t.events.set(r,n),J(n,i,t),t.element.addEventListener(r,r=>{for(let e=0;e<n.length;e++)n[e].call(t,r)})}}function J(e,t,n){if(fe(t))e.push(t);else if(ge(t))for(const r in t)e.push(i=>{i.target.closest(r)&&t[r].call(n,i)})}function Q(e,t){const n="function"==typeof t?t.call(null,Pe):t;if(!he(n))throw new TypeError(`Can't create UI Module because the configuration function did not return a plain object.`);if(!n.element)throw new TypeError(`UI Module requires "element" property that specifies a DOM Element. // expect(element).toEqual(HTMLString || Selector || DOMNode).`);const r=F(n.element),i=n.styles.$scope||e,s=q(n.styles,r,i);n.events&&0<s.size&&W(n.events,s);const a=se($e);a[ee]={template:r,styles:s,imports:n.imports||null,events:n.events||null,render:n.render||null,initialize:fe(n.initialize)?n.initialize:de},ge(n.imports)&&ie(a,n.imports);let o,l;for(o in n)l=n[o],fe(l)&&(a[o]=l);return a}function Z(e,t){let n=null,r=null;return i=>{n||(n=Q(e,t))&&(r=n[ee]);const s=se(n);return s.element=r.template.cloneNode(!0),s.events=new Map,r.initialize.call(s,i),r.render&&Y(s,r.render),r.events&&$(s,r.events),s.element}}const ee=Symbol("\uD83E\uDDFF"),te=Object,ne=Array,re=new Map,ie=te.assign,se=te.create,ae=te.defineProperty,oe=te.getPrototypeOf,le=te.prototype.toString,de=()=>{},ue=te.keys,pe=ne.isArray,ce=ne.from,ge=e=>"object"==typeof e&&null!==e,he=e=>ge(e)&&(le.call(e)==="[object Object]"||null===oe(e)),fe=e=>"function"==typeof e,me=e=>e();let ve=0;const _e=e=>{let t,r="",i=ve.toString(26).split("");for(;t=i.shift();)r+="abcdefghijklmnopqrstuvwxyz"[parseInt(t,26)];return ve++,`${e||"cue"}_${r}`},ye={},be=se(ye),Pe=se(ye),Ce={};Ce.EventBus=me(()=>{const e=new Map,t=`Can't add listener because the provided arguments are invalid.`;let n,r,i,s,a,o=[];const l=(t,n,r,i)=>{const s={handler:n,scope:r,once:i};e.has(t)?e.get(t).push(s):e.set(t,[s])},d=(e,t,i)=>{for(n in e)if(r=e[n],fe(r))l(n,r,t,i);else throw new TypeError(`Can't add listener because handler for "${n}" is not a function but of type ${typeof r}`)};return{on:(e,n,r)=>{if(ge(e))i=ge(n)?n:null,d(e,i,!1);else if("string"==typeof e&&fe(n))i=ge(r)?r:null,l(e,n,i,!1);else throw new TypeError(t)},once:(e,n,r)=>{if(ge(e))i=ge(n)?n:null,d(e,i,!0);else if("string"==typeof e&&fe(n))i=ge(r)?r:null,l(e,n,i,!0);else throw new TypeError(t)},off:t=>{e.delete(t)},trigger:(t,...n)=>{if(s=e.get(t)){for(let e=0;e<s.length;e++)a=s[e],a.handler.apply(a.scope,n),a.once&&o.push(a);o.length&&(e.set(t,s.filter(e=>-1===o.indexOf(e))),o.splice(0,o.length)),s=null}}}});const Ee=new Map,Se=new Map,Oe=[],Ue=[];let xe=0;const De=new Map,je={derivative:null,allProperties:null,derivedProperties:null},Ie=-1,we=1,Te=-1,Me=1,ke=2,Ne={};ae(Ne,ee,{value:{name:"::ROOT::",type:Te,plainState:Ne,proxyState:Ne,observersOf:re,derivativesOf:re,consumersOf:re,providersToInstall:re,derivativesToInstall:re,internalGetters:re,internalSetters:re,propertyDidChange:de}});const Be=new Map([["fill",()=>t],["push",()=>n],["unshift",()=>r],["splice",()=>i],["pop",()=>s],["shift",()=>a],["copyWithin",()=>o],["reverse",()=>l],["sort",()=>d]]);class ze{constructor(e,t,n){this.sourceModule=e,this.sourceProperty=t,this.readOnly=!0===n,this.targetModule=void 0,this.targetProperty=void 0}}class qe{constructor(e,t,n){this.ownPropertyName=e,this.computation=t,this.sourceProperties=n,this.subDerivatives=[],this.superDerivatives=[],this.observers=[],this.source=void 0,this.intermediate=void 0,this._value=void 0,this._cachedValue=void 0,this.needsUpdate=!0,this.stopPropagation=!1,this.hasChanged=!1}get value(){return this.needsUpdate&&(this.intermediate=this.computation.call(null,this.source),m(this._value,this.intermediate)?this.hasChanged=!1:(this._value=pe(this.intermediate)?this.intermediate.slice():"object"==typeof this.intermediate&&null!==this.intermediate?ie({},this.intermediate):this.intermediate,this.hasChanged=!0),this.needsUpdate=!1),this._value}dispose(e=!0){let t;for(this.source=void 0,this.observers=void 0,this.intermediate=void 0,this._value=void 0,t=0;t<this.superDerivatives.length;t++)this.superDerivatives[t].subDerivatives=this.superDerivatives[t].subDerivatives.filter(e=>e!==this),D(this.superDerivatives[t],!0);for(t=0;t<this.subDerivatives.length;t++)this.subDerivatives[t].dispose(!1);if(e)for(t=0;t<this.superDerivatives.length;t++)O(this.superDerivatives[t],Ie);this.superDerivatives=void 0}}const Le={source:null,visited:[],from(e){this.source=e;const t=new Map;let n;for(n of e.keys())this._visit(n,[],t);return this.source=null,this.visited.splice(0,this.visited.length),t},_visit(e,t,n){if(this.source.has(e)){t.push(e),this.visited.push(e);const r=this.source.get(e);for(let e,s=0;s<r.sourceProperties.length;s++){if(e=r.sourceProperties[s],-1!==t.indexOf(e))throw new Error(`Circular dependency. "${r.ownPropertyName}" is required by "${e}": ${t.join(" -> ")}`);-1===this.visited.indexOf(e)&&this._visit(e,t,n)}n.has(e)||n.set(e,r)}}};let Re=null,Ge=!1;class Ae{constructor(e,t){this.type=t,this.valueCache=new Map,this.module=e,this.imports=e.imports,this.mounted=!1,this.internalGetters=re,this.internalSetters=re}bubble(){let e=this.directParent,t=this.ownPropertyName,n=this.proxyState,r=!0;for(;r&&e.type===Me;)-1===Ue.indexOf(e)&&(Ue.push(e),e.cueObservers.call(e,t,n),r=e.cueDerivatives.call(e,t),e.consumersOf.has(t)&&e.cueConsumers.call(e,e,e.consumersOf.get(t),t)),t=e.ownPropertyName,n=e.proxyState,e=e.directParent;if(e.type!==Te){let t=e.closestModuleParent,n=e.branchPropertyName;for(;t&&t.type!==Te;)-1===Ue.indexOf(t)&&(Ue.push(t),t.cueDerivatives.call(t,n)),n=t.branchPropertyName,t=t.closestModuleParent}}instanceWillUnmount(){}}class We extends Ae{constructor(e,t){super(e,t)}instanceDidMount(e,t){this.directParent=e[ee],this.ownPropertyName=t;let n=this.directParent,r=t;for(;n&&n.type!==Me;)r=n.ownPropertyName,n=n.closestModuleParent;this.closestModuleParent=n,this.branchPropertyName=r,this.name=this.module.name,this.internalGetters=this.module.internalGetters,this.internalSetters=this.module.internalSetters,this.consumersOf=this.module.consumersOf,this.observersOf=new Map,this.derivativesOf=new Map,this.derivedProperties=new Map,this.providersOf=new Map,this.module.providersToInstall.size&&this.injectProviders(),this.module.derivativesToInstall.size&&this.installDerivatives(),this.mounted=!0,this.module.initialize.call(this.proxyState,this.initialProps),this.initialProps=void 0}propertyDidChange(e,t){-1===Ue.indexOf(this)&&(Ue.push(this),this.cueObservers(e,t),this.cueDerivatives(e),this.consumersOf.has(e)&&this.cueConsumers(this,this.consumersOf.get(e),e,t),this.bubble())}cueObservers(e,t){if(this.observersOf.has(e)){const n=this.observersOf.get(e);for(let e=0;e<n.length;e++)De.set(n[e],t)}}cueDerivatives(e){if(this.derivativesOf.has(e)){const t=this.derivativesOf.get(e),n=[];let r,i,s,a=!1;for(r=0;r<t.length;r++)i=t[r],-1===Oe.indexOf(i)&&(Oe.push(i),i.needsUpdate=!0,s=i.value,!0===i.hasChanged&&-1===n.indexOf(i)&&(n.push(i),this.cueObservers(i.ownPropertyName,s),a=!0));for(r=0;r<n.length;r++)i=n[r],this.cueDerivatives(i.ownPropertyName);return a}}cueConsumers(e,t,n,r){let i,s;for(i in this.plainState)if(s=this.plainState[i],s&&(s=s[ee])){let i;for(i of s.providersOf.values())i.sourceInternals===e&&i.sourceProperty===n&&(s.cueObservers.call(s,i.targetProperty,r),s.cueDerivatives.call(s,i.targetProperty),s.consumersOf.has(i.targetProperty)&&s.cueConsumers.call(s,s,s.consumersOf.get(i.targetProperty),i.targetProperty,r));s.cueConsumers.call(s,e,t,n,r)}}injectProviders(){let e,t,n,r,i,s;for(e of this.module.providersToInstall.values())if(!1===e.readOnly){t=e.sourceModule,n=e.sourceProperty,r=e.targetModule,i=e.targetProperty;let a=this.closestModuleParent;for(;a&&a.name!==t;)a=a.closestModuleParent;if(a)s=a.providersOf.get(n),s=s?P(s):{sourceInternals:a,sourceProperty:n,targetModule:r,targetProperty:i},this.providersOf.set(i,s);else throw new Error(`[${r}]: Can't inject "${i}" from "${t}" because it's not an ancestor of the injecting module instance.`)}}installDerivatives(){let e,t,n,r,s;for(e of this.module.derivativesToInstall.values()){for(n=new qe(e.ownPropertyName,e.computation,e.sourceProperties),this.derivedProperties.set(e.ownPropertyName,n),t=0;t<e.sourceProperties.length;t++)r=e.sourceProperties[t],this.derivativesOf.has(r)?this.derivativesOf.get(r).push(n):this.derivativesOf.set(r,[n]);for(t=0;t<e.superDerivatives.length;t++)s=this.derivedProperties.get(e.superDerivatives[t].ownPropertyName),n.superDerivatives.push(s),s.subDerivatives.push(n);n.source=this.proxyState}}addChangeReaction(e,t,n,r=!0){if(!fe(t))throw new TypeError(`Property change reaction for "${e}" is not a function...`);const i=t.bind(n);if(this.observersOf.has(e)?this.observersOf.get(e).push(i):this.observersOf.set(e,[i]),this.derivedProperties.has(e)){const t=this.derivedProperties.get(e);t.observers.push(i),O(t,Ie)}return!0===r&&(xe++,De.set(i,this.proxyState[e]),T()),i}removeChangeReaction(e,t){if(this.observersOf.has(e)){const n=this.observersOf.get(e),r=this.derivedProperties.get(e);if(t===void 0)this.observersOf.delete(e),r&&(r.observers.splice(0,r.observers.length),O(r,we));else if(fe(t)){let s=n.indexOf(t);-1<s?n.splice(s,1):console.warn(`Can't remove the passed handler from reactions of "${e}" because it is not registered.`),r&&(s=r.observers.indexOf(t),-1<s?(r.observers.splice(s,1),O(r,we)):console.warn(`Can't remove the passed handler from observers of derived property "${e}" because it is not registered.`))}}else console.warn(`Can't unobserve property "${e}" because no reaction has been registered for it.`)}}class Fe extends Ae{constructor(e,t){super(e,t)}instanceDidMount(e,t){this.directParent=e[ee],this.ownPropertyName=t;let n=this.directParent,r=t;for(;n&&n.type!==Me;)r=n.ownPropertyName,n=n.closestModuleParent;this.closestModuleParent=n,this.branchPropertyName=r,this.internalGetters=Be,this.mounted=!0}propertyDidChange(){this.bubble()}}ie(be,{import:e=>{const t=Ee.get(e);if(!t)throw new ReferenceError(`Can't import undefined State Module "${e}".`);return t},inject:(e,t={readOnly:!1})=>{const n=e.split("."),r=n.slice(0,-1).join("."),i=n[n.length-1];if(!Ee.has(r))throw new ReferenceError(`Can't inject "${i}" from undefined State Module "${r}".`);return new ze(r,i,t.readOnly)}}),Ce.State={register:(e,t)=>{if("string"!=typeof e)throw new TypeError(`Can't create Cue State Module. First argument must be name of type string but is of type "${typeof e}".`);else if(Ee.has(e))throw new Error(`A State Module has already been registered under name "${e}". Unregister, use a unique name or consider namespacing.with.dots-or-hyphens...`);const n={name:e};Se.set(e,n);const r=z(n,t);return Ee.set(e,r),r},isState:e=>e&&e[ee]};const Xe=new Map;ie(Pe,{import:e=>{const t=Xe.get(e);if(!t)throw new ReferenceError(`Can't import UI Component because nothing is registered under "${e}".`);return t}});const Ve=new Set(["abbr","address","area","article","aside","audio","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","main","map","mark","menu","meter","nav","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"]),Ye=me(()=>{const e=document.createElement("style");return e.id="CUE-STYLES",document.head.appendChild(e),e.sheet}),$e=me(()=>{const e=document,t=NodeList.prototype.isPrototypeOf,n=HTMLCollection.prototype.isPrototypeOf,r=new WeakMap,i=(()=>{const n=e.createElement("tst"),r={transition:{run:"transitionrun",start:"transitionstart",end:"transitionend"},WebkitTransition:{run:"webkitTransitionRun",start:"webkitTransitionStart",end:"webkitTransitionEnd"},MozTransition:{run:"transitionRun",start:"transitionStart",end:"transitionEnd"},MSTransition:{run:"msTransitionRun",start:"msTransitionStart",end:"msTransitionEnd"},OTransition:{run:"oTransitionRun",start:"oTransitionStart",end:"oTransitionEnd"}};for(const e in r)if(n.style[e])return r[e]})();return{select(r,i){if("string"==typeof r){i=i?this.select(i):this.element;let t,n;switch(r[0]){case"#":t=e.getElementById(r.substring(1));break;case".":t=i.getElementsByClassName(this[ee].styles.get(n=r.substring(1))||n);break;default:t=i.querySelectorAll(r);}return t.nodeType!==Node.TEXT_NODE&&t.length?1===t.length?t[0]:ce(t):t}if(r instanceof Element)return r;if(tt.UI.isComponent(r))return r.element;if(t(r)||n(r))return ce(r);if(pe(r))return r.map(e=>this.select(e,i));if(ge(r)){const e={};for(const t in r)e[t]=this.select(r[t],i);return e}},hasContent(e){return e=e?this.select(e):this.element,!!(e.children.length||e.textContent.trim().length)},isIterable(e){return e=e?this.select(e):this.element,e.nodeType!==Node.TEXT_NODE&&e.length},hasClass(e,t){return 1===arguments.length?(t=e,e=this.element):e=this.select(e),e.classList.contains(this[ee].styles.get(t)||t)},addClass(e,t){let n;return 1===arguments.length?(n=e.split(" ").map(e=>this[ee].styles.get(e)||e),e=this.element):(e=this.select(e),n=t.split(" ").map(e=>this[ee].styles.get(e)||e)),e.classList.add(...n),this},removeClass(e,t){let n;return 1===arguments.length?(n=e.split(" ").map(e=>this[ee].styles.get(e)||e),e=this.element):(e=this.select(e),n=t.split(" ").map(e=>this[ee].styles.get(e)||e)),e.classList.remove(...n),this},toggleClass(e,t){return 1===arguments.length?(t=e,e=this.element):e=this.select(e),e.classList.toggle(this[ee].styles.get(t)||t),this},replaceClass(e,t,n){return 2===arguments.length?(t=e,n=t,e=this.element):e=this.select(e),e.classList.replace(this[ee].styles.get(t)||t,this[ee].styles.get(n)||n),this},index(e){return e=e?this.select(e):this.element,ce(e.parentNode.children).indexOf(e)},siblings(e,t){return 1===arguments.length?(t=!0===e,e=this.element):e=this.select(e),t?ce(e.parentNode.children):ce(e.parentNode.children).filter(t=>t!==e)},refs(e){e=e?this.select(e):this.element;const t=e.querySelectorAll("[ref]");if(t.length){const e={};for(let n,r=0;r<t.length;r++)n=t[r],e[n.getAttribute("ref")]=n;return e}},boundingBox(e){e=e?this.select(e):this.element;const t=e.cloneNode(!0);t.style.position="absolute",t.style.left="-100000px",t.style.top="-100000px",t.style.display="block",this.element.parentElement.appendChild(t);const n=t.getBoundingClientRect();return t.parentElement.removeChild(t),n},position(e){return e=e?this.select(e):this.element,{top:e.offsetTop,left:e.offsetLeft}},offset(e){e=e?this.select(e):this.element;const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},awaitTransition(...e){return e=e.length?e.map(e=>this.select(e)):[this.element],Promise.all(e.map(e=>i.end?new Promise(t=>{const n=this.select(e),r=()=>{n.removeEventListener(i.end,r),t()};n.addEventListener(i.end,r)}):Promise.resolve()))},setChildren(e,t,n,i=de){const s=r.get(e)||[];if(r.set(e,t.slice()),0===t.length)e.textContent="";else if(0===s.length)for(let r=0;r<t.length;r++)e.appendChild(n(t[r]));else X(e,s,t,n,i);return this},insertBefore(e,t){return 1===arguments.length?(t=this.select(e),e=this.element):(e=this.select(e),t=this.select(t)),t.parentNode.insertBefore(e,t),this},insertAfter(e,t){return 1===arguments.length?(t=this.select(e),e=this.element):(e=this.select(e),t=this.select(t)),t.parentNode.insertBefore(e,t.nextSibling),this},insertAt(e,t){1===arguments.length?(t=parseInt(e),e=this.element):(e=this.select(e),t=parseInt(t));const n=e.parentNode,r=n.children;return t>=r.length?n.appendChild(e):0>=t?n.insertBefore(e,n.firstChild):n.insertBefore(e,r[t>=Array.from(r).indexOf(e)?t+1:t]),this},detach(e){return e=e?this.select(e):this.element,e.parentNode.removeChild(e)},remove(e){return e=e?this.select(e):this.element,e.parentNode.removeChild(e),this}}});Ce.UI={register:(e,t)=>{if("string"!=typeof e)throw new TypeError(`Can't create Cue-UI Module. First argument must be name of type string but is of type "${typeof e}".`);else if(!t||"function"!=typeof t&&!he(t))throw new TypeError(`Can't create Cue-UI Module. Second argument must be module initializer function or configuration object but is of type "${typeof t}".`);else if(Xe.has(e))throw new Error(`A UI Module has already been registered under name "${e}". Unregister, use a unique name or consider namespacing.with.dots-or-hyphens...`);const n=Z(e,t);return Xe.set(e,n),n},isComponent:e=>e instanceof $e};const Je=new Map,Qe={core:ye,state:be,ui:Pe},Ze=e=>"string"==typeof e&&2<e.length&&-1!==e.indexOf("-"),He=e=>e.split("-"),Ke=(e,t)=>e.didInstall?e.extensionPoint:(e.extensionPoint=e.installer.call(null,Qe,t),e.didInstall=!0,e.extensionPoint);Ce.Plugin={register:(e,t,n)=>{if(!Ze(e))throw new Error(`Plugin must be defined with a namespaced-name (vendor-plugin) of type string as the first argument.`);const[r,i]=He(e);if(!t&&!n){const t=Je.get(r);if(t){const n=t.get(i);if(n)return n;throw new Error(`No Plugin with name ${e} has been registered under "${r}".`)}else throw new Error(`No Plugin has been registered under "${t}".`)}else{if("function"!=typeof t)throw new Error(`Plugin must be defined with an installable function as the second argument.`);const s=Je.get(r)||Je.set(r,new Map).get(r);if(s.has(i))return console.warn(`A plugin with name "${i}" has already been registered under "${r}". Skipping installation...`),s.get(i).name;const a={installer:t,didInstall:!1,name:e,extensionPoint:void 0};return s.set(i,a),n&&Ke(a),e}},use:(e,t)=>{if(!Ze(e))throw new Error(`pluginName must be a namespaced-string (vendor-plugin).`);const[n,r]=He(e),i=Je.get(n);if(i){const e=i.get(r);if(e)return Ke(e,t)}throw new Error(`No Plugin has been registered under "${e}".`)}};class et{constructor(e){if(!ge(e))throw new TypeError("Cue config must be an object.");this.stateModule=e.state,this.stateInstance=null,this.stateInternals=null,this.uiComponent=e.ui,this.uiElement=null,this.mounted=!1}mount(e,t=void 0){if(!0===this.mounted)throw new Error("Cue instance already mounted.");let n;"string"==typeof this.stateModule?n=this.stateModule:("function"==typeof this.stateModule||"object"==typeof this.stateModule)&&(n=_e("cue_module"),Ce.State.register(n,this.stateModule));let r;"string"==typeof this.uiComponent?r=this.uiComponent:("function"==typeof this.uiComponent||"object"==typeof this.uiComponent)&&(r=_e("cue_component"),Ce.UI.register(r,this.uiComponent));const i=be.import(n),s=Pe.import(r);if(e="string"==typeof e?document.querySelector(e):e instanceof Element?e:void 0,!e)throw new TypeError(`Target must be a valid DOM Element or DOM Selector String.`);const a=this.stateInstance=i(t),o=this.stateInternals=a[ee];o.instanceDidMount(Ne,n);const l=this.uiElement=s(a);return e.appendChild(l),this.mounted=!0,this}unmount(){if(!1===this.mounted)throw new Error(`Can't unmount Cue instance because it has not been mounted.`);return this.uiElement.parentElement.removeChild(this.uiElement),this.uiElement=null,this.stateInstance=null,this.stateInternals=null,this.mounted=!1,this}getState(e){if(!this.stateInstance)throw new ReferenceError(`State can't be "${typeof this.stateInstance}" when getting it. Mount the Cue Instance first.`);else return this.stateInternals.proxyState.get(e)}setState(e){if(!this.stateInstance)throw new ReferenceError(`State can't be "${typeof this.stateInstance}" when setting it. Mount the Cue Instance first.`);else this.stateInternals.proxyState.set(e);return this}}const tt=e.Cue=e=>new et(e);Object.defineProperties(tt,{on:{value:Ce.EventBus.on},once:{value:Ce.EventBus.once},off:{value:Ce.EventBus.off},trigger:{value:Ce.EventBus.trigger},Plugin:{value:Ce.Plugin.register},usePlugin:{value:Ce.Plugin.use},State:{value:Ce.State.register},isState:{value:Ce.State.isState},UI:{value:Ce.UI.register},isComponent:{value:Ce.UI.isComponent}}),tt.Plugin("cue-math",e=>{const t=Math,n=t.max,r=t.min,i=t.random,s=t.abs,a=t.pow,o=t.round,l=t.floor,u=t.ceil,p=t.PI;return e.core.Math={clamp(e,t,i){return n(e,r(t,i))},lerp(e,t,n){return(1-n)*e+n*t},smoothStep(e,t,n){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))},translate(e,t,n,r,i){return n+(i-e)*(r-n)/(t-e)},createTranslator(e,t,n,r){return 0===e&&0<n?e=>e*(r-n)/t+n:0===n&&0<e?n=>(n-e)*r/(t-e):0===e===n?e=>e*r/r:this.translate},convertBits(e,t,n){return 32>e?32>t?n*a(2,t)/a(2,e):n/a(2,e):32>t?o(n*a(2,t)):n},randomIntBetween(e,t){return l(i()*(t-e+1)+e)},randomFloatBetween(e,t){return i()*(t-e)+e},isOdd(e){return 1&e},isEven(e){return!(1&e)},degreesToRadians(e){return e*(p/180)},radiansToDegrees(e){return e*(180/p)},scale(e,t){const n=e.length-1,r=t-1;let s,o=0,p=0,g=0,h=0;for(s=1;s<r;s++)o=s*(n/r),p=l(o),g=u(o),h=o-p,e[s]=e[p]+(e[g]-e[p])*h;return e[r]=e[n],this},closest(e,t){return e.reduce((e,n)=>s(n-t)<s(e-t)?n:e)},smallest(e){let t=1/0;for(let n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return t===1/0?void 0:t},largest(e){let t=-Infinity;for(let n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return t===-Infinity?void 0:t}}},!0),tt.Plugin("cue-string",e=>e.core.String={createUID(){let e=0;return(this.createUID=function(){let t,r="";for(const n=e.toString(26).split("");t=n.shift();)r+="abcdefghijklmnopqrstuvwxyz"[parseInt(t,26)];return e++,r}).call(this)},toCamelCase(e){const t=document.createElement("div");return t.setAttribute(`data-${e}`,""),ue(t.dataset)[0]},toDashedCase(e){const t=document.createElement("div");return t.dataset[e]="",t.attributes[0].name.substr(5)}},!0),tt.Plugin("cue-array",e=>{const t=Array.isArray;return e.core.Array={flatten(e){return e.reduce((e,n)=>e.concat(t(n)?this.flatten(n):n),[])},insertEveryNth(e,t,r){for(let n=e.length;0<--n;)0==n%r&&e.splice(n,0,t);return this},removeEveryNth(e,t){for(let n=e.length;--n;)0==n%t&&e.splice(n,1);return this},removeRange(e,t,n){return e.splice(t,n-t),this},merge(e,...t){let n,r,a;for(n=0;n<t.length;n++)for(a=t[n],r=0;r<a.length;r++)e.push(a[r]);return this}}},!0),tt.Plugin("cue-equality",e=>{const t=Object,n=Array.isArray;return t.assign(e.core,{isEqual(e,r,i=!1){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){const s=e.constructor===t,a=r.constructor===t;if(s!==a)return!1;if(s&&a)return this.arePlainObjectsEqual(e,r,i);const o=n(e),l=n(r);if(o!==l)return!1;if(o&&l)return this.areArraysEqual(e,r,i);const d=e instanceof Map,u=r instanceof Map;if(d!==u)return!1;if(d&&u)return this.areMapsEqual(e,r,i);const p=e instanceof Set,c=r instanceof Set;if(p!==c)return!1;if(p&&c)return this.areSetsEqual(e,r,i);const g=e instanceof Date,h=r instanceof Date;if(g!==h)return!1;if(g&&h)return e.getTime()===r.getTime();const f=e instanceof RegExp,m=r instanceof RegExp;return f===m&&(f&&m?e.toString()===r.toString():this.arePlainObjectsEqual(e,r,i))}return e!==e&&r!==r},areArraysEqual(e,t,n=!1){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!this.isEqual(e[r],t[r],n))return!1;return!0},arePlainObjectsEqual(e,t,n=!1){const r=ue(e),s=ue(t);if(r.length!==s.length)return!1;for(let a,o=0;o<r.length;o++)if(a=r[o],-1===s.indexOf(a)||!this.isEqual(e[a],t[s[o]],n))return!1;return!0},areMapsEqual(e,t,n=!1){if(e.size!==t.size)return!1;const r=Array.from(e),s=Array.from(t);for(let a,o,l=0;l<r.length;l++)if(a=r[l],o=s[l],a[0]!==o[0]||!this.isEqual(a[1],o[1],n))return!1;return!0},areSetsEqual(e,t,n=!1){if(e.size!==t.size)return!1;const r=Array.from(e),s=Array.from(t);for(let a=0;a<r.length;a++)if(!this.isEqual(r[a],s[a],n))return!1;return!0}})},!0),tt.Plugin("cue-clone",e=>{const t=Object,n=t.prototype.toString,r=e=>"object"==typeof e&&null!==e,i=Array.isArray,s=Object.getPrototypeOf;return t.assign(e.core,{clone(e,t=!1){if(i(e))return this.cloneArray(e,t);if(r(e)){if(n.call(e)==="[object Object]"||null===s(e))return this.clonePlainObject(e,t);if(e instanceof Map)return this.cloneMap(e,t);if(e instanceof Set)return this.cloneSet(e,t);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return RegExp(e.source,e.flags)}throw new TypeError(`Can't clone non-object, null or undefined."`)},cloneArray(e,t=!1){if(t){const n=[];for(let s,a=0;a<e.length;a++)s=e[a],n.push(r(s)?this.clone(s,t):s);return n}return e.slice()},clonePlainObject(e,n=!1){if(n){const t={};let i,s;for(i in e)s=e[i],t[i]=r(s)?this.clone(s,n):s;return t}return t.assign({},e)},cloneMap(e,t=!1){const n=new Map;return t?e.forEach((e,i)=>n.set(r(i)?this.clone(i,t):i,r(e)?this.clone(e,t):e)):e.forEach((e,t)=>n.set(t,e)),n},cloneSet(e,t=!1){const n=new Set;return e.forEach(e=>n.add(t&&r(e)?this.clone(e,t):e)),n}})},!0),tt.Plugin("cue-fn",e=>e.core.Function={throttle(e,t=250,n=null){let r=0,i=0;return function(...s){r=Date.now(),r>i+t&&(e.apply(n,s),i=r)}},defer(e,t=250,n=null){let r=null;return function(...i){clearTimeout(r),r=setTimeout(()=>{e.apply(n,i),r=null},t)}},createTaskWorker(e){const t="function"==typeof e?e:e.process?e.process:void 0,n=new Worker(window.URL.createObjectURL(new Blob([`(function() { onmessage = ${t.toString()} })()`],{type:"application/javascript"})));return e.response&&(n.onmessage=e.response),e.onError&&(n.onerror=e.onError),{process:n.postMessage.bind(n),terminate:n.terminate.bind(n),set response(e){n.onmessage=e},get response(){return n.onmessage},set onError(e){n.onerror=e},get onError(){return n.onerror}}}},!0)})(window||this);